<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">
<meta charset="utf-8">
	<title class="AdminSidebar">Menu Setup</title>
	<div th:replace="~{fragments/head :: head}"></div>
	<script src="js/script.js"></script> 
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
	<body class="mod-bg-1 mod-nav-link">
		<div th:replace="~{fragments/header :: header}"></div>
		<div th:replace="~{fragments/navmenus :: navmenus}"></div>
		<!-- BEGIN Page Wrapper -->
		<div class="page-wrapper">
			<div class="page-inner">
				<!-- BEGIN Left Aside -->
				<div th:replace="~{fragments/sidebar :: sidebar}"></div>
				<!-- END Left Aside -->
				<div class="page-content-wrapper">
					<!-- BEGIN Page Content -->
					<!-- the #js-page-content id is needed for some plugins to initialize -->
					<main id="js-page-content" role="main" class="page-content">
					<!-- <ol class="breadcrumb page-breadcrumb">
                            <li class="breadcrumb-item"><a href="javascript:void(0);">SmartAdmin</a></li>
                            <li class="breadcrumb-item">category_1</li>
                            <li class="breadcrumb-item">category_2</li>
                            <li class="breadcrumb-item active">Page Titile</li>
                            <li class="position-absolute pos-top pos-right d-none d-sm-block"><span class="js-get-date"></span></li>
                        </ol> -->
					<div class="subheader mb-2">
						<h1 class="subheader-title">
						<div th:replace="~{fragments/toggleMenu :: toggleMenu}"></div>
							<i class='subheader-icon'></i>MENU SETUP</span>
						</h1>
<div class="frame-wrap bg-transparent">
							<a href="javascript:void(0);"
								class="btn btn-primary btn-sm btn-icon waves-effect waves-themed"
								data-toggle="tooltip" data-placement="top"
								data-original-title="Add" id="AddButton"> <i class="fal fa-plus"></i>
							</a> <a href="javascript:void(0);"
								class="btn btn-warning btn-sm btn-icon waves-effect waves-themed"
								data-toggle="tooltip" data-placement="top"
								data-original-title="Print" id="testValue"> <i class="fal fa-print"></i>
							</a> <a href="javascript:void(0);"
								class="btn btn-secondary btn-sm btn-icon waves-effect waves-themed"
								data-toggle="tooltip" data-placement="top"
								data-original-title="Clear" id="clearButton" > <i class="fal fa-times"></i>
							</a> <a href="javascript:void(0);"
								class="btn btn-success btn-sm btn-icon waves-effect waves-themed"
								data-toggle="tooltip" data-placement="top"
								data-original-title="OK/Save" id="saveMenSetup"> <i class="fal fa-save"></i>
							</a> <a href="javascript:void(0);"
								class="btn btn-danger btn-sm btn-icon waves-effect waves-themed"
								data-toggle="tooltip" data-placement="top"
								data-original-title="Cancel/Exit" onclick="history.back()" > <i
								class="fal fa-sign-out"></i>
							</a>
                    </div> 

					</div>

					<div class="row">
						<div class="col-md-5 col-lg-5 col-xl-5 pr-0">
							<div id="panel-1" class="panel mb-0">
                                <div class="panel-hdr">
                                    <h2>
                                        Menu List
                                    </h2>
                                </div>
                                <div class="panel-container show">
                                    <div class="panel-content p-1">
                                        <div id="menuList-Block">
											<div class="d-flex mb-1">
												<div class="form-group w-100">
													<div class="input-group">
														<div class="input-group-prepend"> 
															<button id="Searching" class="btn btn-primary btn-sm" type="button"><i
																	class="fal fa-search"></i></button>
														</div>
														<input id="searchMenuSetup" style="height: 30px;" type="text"
															class="form-control emptyMenuSetup" placeholder="Search"
															aria-label="Example text with button addon"
															aria-describedby="button-addon4">
													</div>
												</div>
												<button type="button" class="btn btn-primary btn-sm ml-2 text-nowrap" style="min-width: 110px;" id="includeInactive">Include
													Inactive</button>
												<input type="hidden" id="" value="">
												<input type="hidden" id="">
											</div>
                                            <div id="menulist-table"></div>
											<table class="table table-hover table-clean my-0">
			                                    <tbody>
													 <tr>
			                                            <td style="text-align: -webkit-right;"><span style="height:15px; width:15px" class="rounded-circle d-block bg-success-900"></span> </td>
			                                             <td class="color-success-900">Status : Active</td>
			                                                 <td style="text-align: -webkit-right;"><span style="height:15px; width:15px" class="rounded-circle d-block bg-danger-900"></span> </td>
			                                           <td class="color-danger-900">Status : Inactive</td>
			                                        </tr>
			                                    </tbody>
			                                </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
						</div>

						<div class="col-md-7 col-lg-7 col-xl-7">
							<div id="panel-1" class="panel mb-0">
                                <div class="panel-hdr">
                                    <h2>
                                        Menu Setup
                                    </h2>
                                </div>
                                <div class="panel-container show">
                                    <div class="panel-content p-1">
                                        <div id="menu-SetupBlock">
		                                   	<table >
			                                      <tbody>
													  <tr>
			                                                <td class="pl-2" style="width: 200px;"><label for="Security" class="form-label mr-2 mb-0 text-nowrap text-nowrap">Inserted Date:</label><span id="insdate"></span></td>
			                                                <td style="width: 200px;"><label for="Security" class="form-label mr-2 mb-0 text-nowrap text-nowrap">Inserted By:</label><span id="insuserid"></span></td>
			                                                <td style="width: 200px;"><label for="Security" class="form-label mr-2 mb-0 text-nowrap text-nowrap">Last Updated:</label><span id="upddate"></span></td>
			                                                <td style="width: 200px;"><label for="Security" class="form-label mr-2 mb-0 text-nowrap text-nowrap">Updated By:</label><span id="upduserid"></span></td>
			                                            </tr>
				                                   	</tbody>
			                                   </table>
										  	<div class="form-group row mx-1" id="flagInsertUpdate" value="">
												  <div class="col-lg-8">
													  <div class="row">
														  <div class="col-12 col-md-5 col-lg-5 col-xl-5 d-flex align-items-center pl-0 floatingFields mt-3">
																<input type="text" class="form-control floatingLable emptyMenuSetup" aria-label="" id="menuCodeInsertUpdate" name="menuCodeInsertUpdate" value="" placeholder="" >
																<label for="Name" class="form-label text-nowrap mb-0">Menu#<span class="text-danger">*</span></label>
														   </div>
														   <div class="col-12 col-md-7 col-lg-7 col-xl-7 d-flex align-items-center pl-0 floatingFields mt-3">
																<input type="text" class="form-control floatingLable emptyMenuSetup" id="menuInsertUpdate" name="menuInsertUpdate" value="" placeholder="" data-MenuName-type="">
																<label for="Name" class="form-label text-nowrap mb-0">Menu Name <span class="text-danger">*</span></label>
															</div>
															<div class="col-12 col-md-9 col-lg-9 col-xl-9 mt-11px d-flex align-items-center pl-0 floatingFields mt-3">
																<input type="text" class="form-control floatingLable emptyMenuSetup" aria-label="" id="screenCodeInsertUpdate" name="screenCodeInsertUpdate" value="" placeholder="">
																<label for="Name" class="form-label text-nowrap mb-0">Screen#<span class="text-danger">*</span></label>
															</div>
			                                                <div class="col-12 col-md-3 col-lg-3 col-xl-3 mt-11px selectFloatingLabel pl-0 d-flex align-items-center mt-3">
																<div class="d-flex align-items-center">
																	<label class="form-label d-flex mx-2 mb-0" style="position:unset">Status</label>
																	<div class="custom-control custom-switch" style="margin-bottom: 0 !important;">
																		<input type="checkbox" class="custom-control-input" id="menuStatusInsertUpdate"  checked="">
																		<label class="custom-control-label" for="customSwitch2"></label>
																	</div>
																</div>
															</div>
													  </div>
												  </div>
												  <div class="col-lg-4 px-0">
													  <div class="row mx-1">
														<div class="col-12 col-lg-12 px-0">
															<div class="card mb-g rounded-top" style="margin-bottom: 0 !important;">
																<div class="row no-gutters row-grid">
																	<div class="col-12">
																		<div class="d-flex flex-column align-items-center justify-content-center p-1">
																			<label class="form-label position-absolute" style="top: 5px;left: 10px;">Icon</label>
																			<img id="previewImage"
																				class="rounded-circle shadow-2 img-thumbnail"
																				alt="" height="50" width="50">
																			<div class="input-group mt-1" style="font-size: 11px;">
																				<div class="custom-file">
																					<input type="file" class="custom-file-input"
																						id="iconFile">
																					<label class="custom-file-label"
																						for="iconFile"
																						aria-describedby="inputGroupFileAddon02"><span>Choose
																							File</span></label>
																				</div>
																				<div class="input-group-append">
																					<span class="input-group-text"
																						id="inputGroupFileAddon02"
																						style="font-size: 11px;">Upload</span>
																				</div>
																			</div>
																			<span id="icon-error" class="text">Your Icon will be
																				previewed here</span>
																		</div>
																	</div>
																</div>
															</div>
														</div>
													</div>
												  </div>
											</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="panel-1" class="panel mt-3">
                                <div class="panel-hdr" id="menuCodeSubMenu" value="">
                                    <h2>
                                        Submenu
                                    </h2>
                                    <a href="javascript:void(0);"
										class="btn btn-primary btn-sm btn-icon waves-effect waves-themed"
										data-toggle="tooltip" data-placement="top"
										data-original-title="Add" id="addSubMenu"> <i class="fal fa-plus"></i>
									</a>
                                </div>
                                <div class="panel-container show">
                                    <div class="panel-content p-1">
                                        <div id="js-checkbox-toggles">
                                            <div id="menusetup-table"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
						</div>
					</div>
					<div class="modal fade" id="securityThreatGroup" tabindex="-1" role="dialog" aria-hidden="true">
							<div class="modal-dialog modal-dialog-centered modal-md" role="document">
								<div class="modal-content">
									<div class="modal-header pt-3 pb-2">
										<h6 class="modal-title">Submenu Icon</h6>
										<button type="button" class="close" data-dismiss="modal" aria-label="Close">
											<span aria-hidden="true"><i class="fal fa-times"></i></span>
										</button>
									</div>
									<div class="modal-body py-0">
									    <div class="d-flex flex-column align-items-center justify-content-center p-1">
											<label class="form-label position-absolute" style="top: 5px;left: 10px;">Icon</label>
											<img id="previewImage1"
												class="rounded-circle shadow-2 img-thumbnail"
												alt="" height="50" width="50">
											<div class="input-group mt-1" style="font-size: 11px;">
												<div class="custom-file">
													<input type="file" class="custom-file-input"
														id="iconFile1">
													<label class="custom-file-label"
														for="iconFile"
														aria-describedby="inputGroupFileAddon02"><span>Choose
															File</span></label>
												</div>
												<div class="input-group-append">
													<span class="input-group-text"
														id="inputGroupFileAddon02"
														style="font-size: 11px;">Upload</span>
												</div>
											</div>
											<span id="icon-error" class="text">Your Icon will be
												previewed here</span>
										</div>
									</div>
								<div class="modal-footer">
								    <button type="button" class="btn btn-primary btn-sm waves-effect waves-themed" id="fetchDataBtn">Ok</button>
								    <button type="button" class="btn btn-secondary btn-sm waves-effect waves-themed" data-dismiss="modal">Cancel</button>
								</div>
								</div> 
							</div>			
						</div>
					</main>
					<!-- this overlay is activated only when mobile menu is triggered -->
					<div class="page-content-overlay" data-action="toggle"
						data-class="mobile-nav-on"></div>
					<!-- END Page Content -->
					<!-- BEGIN Page Footer -->
					<!--<div th:replace="~{fragments/footer :: footer}"></div>-->
					<!-- END Page Footer -->
					<!-- BEGIN Shortcuts -->
					<!-- modal shortcut -->
					<div class="modal fade modal-backdrop-transparent"
						id="modal-shortcut" tabindex="-1" role="dialog"
						aria-labelledby="modal-shortcut" aria-hidden="true">
						<div class="modal-dialog modal-dialog-top modal-transparent"
							role="document">
							<div class="modal-content">
								<div class="modal-body">
									<ul class="app-list w-auto h-auto p-0 text-left">
										<li><a href="intel_introduction.html"
											class="app-list-item text-white border-0 m-0">
												<div class="icon-stack">
													<i
														class="base base-7 icon-stack-3x opacity-100 color-primary-500 "></i>
													<i
														class="base base-7 icon-stack-2x opacity-100 color-primary-300 "></i>
													<i
														class="fal fa-home icon-stack-1x opacity-100 color-white"></i>
												</div> <span class="app-list-name"> Home </span>
										</a></li>
										<li><a href="page_inbox_general.html"
											class="app-list-item text-white border-0 m-0">
												<div class="icon-stack">
													<i
														class="base base-7 icon-stack-3x opacity-100 color-success-500 "></i>
													<i
														class="base base-7 icon-stack-2x opacity-100 color-success-300 "></i>
													<i class="ni ni-envelope icon-stack-1x text-white"></i>
												</div> <span class="app-list-name"> Inbox </span>
										</a></li>
										<li><a href="intel_introduction.html"
											class="app-list-item text-white border-0 m-0">
												<div class="icon-stack">
													<i
														class="base base-7 icon-stack-2x opacity-100 color-primary-300 "></i>
													<i
														class="fal fa-plus icon-stack-1x opacity-100 color-white"></i>
												</div> <span class="app-list-name"> Add More </span>
										</a></li>
									</ul>
								</div>
							</div>
						</div>
					</div>
					<!-- END Shortcuts -->
				</div>
			</div>
		</div>
		<!-- END Page Wrapper -->
		<!-- BEGIN Quick Menu -->
		<!-- to add more items, please make sure to change the variable '$menu-items: number;' in your _page-components-shortcut.scss -->
		<nav class="shortcut-menu d-none d-sm-block"> <input
			type="checkbox" class="menu-open" name="menu-open" id="menu_open" />
		<label for="menu_open" class="menu-open-button "> <span
			class="app-shortcut-icon d-block"></span>
		</label> <a href="#" class="menu-item btn" data-toggle="tooltip"
			data-placement="left" title="Scroll Top"> <i
			class="fal fa-arrow-up"></i>
		</a> <a href="page_login-alt.html" class="menu-item btn"
			data-toggle="tooltip" data-placement="left" title="Logout"> <i
			class="fal fa-sign-out"></i>
		</a> <a href="#" class="menu-item btn" data-action="app-fullscreen"
			data-toggle="tooltip" data-placement="left" title="Full Screen">
			<i class="fal fa-expand"></i>
		</a> <a href="#" class="menu-item btn" data-action="app-print"
			data-toggle="tooltip" data-placement="left" title="Print page"> <i
			class="fal fa-print"></i>
		</a> <a href="#" class="menu-item btn" data-action="app-voice"
			data-toggle="tooltip" data-placement="left" title="Voice command">
			<i class="fal fa-microphone"></i>
		</a> </nav>
		<!-- END Quick Menu -->
		<!-- BEGIN Messenger -->
		<div class="modal fade js-modal-messenger modal-backdrop-transparent"
			tabindex="-1" role="dialog" aria-hidden="true">
			<div class="modal-dialog modal-dialog-right">
				<div class="modal-content h-100">
					<div
						class="dropdown-header bg-trans-gradient d-flex align-items-center w-100">
						<div
							class="d-flex flex-row align-items-center mt-1 mb-1 color-white">
							<span class="mr-2"> <span
								class="rounded-circle profile-image d-block"
								style="background-image: url('img/demo/avatars/avatar-d.png'); background-size: cover;"></span>
							</span>
							<div class="info-card-text">
								<a href="javascript:void(0);"
									class="fs-lg text-truncate text-truncate-lg text-white"
									data-toggle="dropdown" aria-expanded="false"> Tracey Chang
									<i
									class="fal fa-angle-down d-inline-block ml-1 text-white fs-md"></i>
								</a>
								<div class="dropdown-menu">
									<a class="dropdown-item" href="#">Send Email</a> <a
										class="dropdown-item" href="#">Create Appointment</a> <a
										class="dropdown-item" href="#">Block User</a>
								</div>
								<span class="text-truncate text-truncate-md opacity-80">IT
									Director</span>
							</div>
						</div>
						<button type="button"
							class="close text-white position-absolute pos-top pos-right p-2 m-1 mr-2"
							data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true"><i class="fal fa-times"></i></span>
						</button>
					</div>
					<div class="modal-body p-0 h-100 d-flex">
						<!-- BEGIN msgr-list -->
						<div
							class="msgr-list d-flex flex-column bg-faded border-faded border-top-0 border-right-0 border-bottom-0 position-absolute pos-top pos-bottom">
							<div>
								<div
									class="height-4 width-3 h3 m-0 d-flex justify-content-center flex-column color-primary-500 pl-3 mt-2">
									<i class="fal fa-search"></i>
								</div>
								<input type="text" class="form-control bg-white"
									id="msgr_listfilter_input" placeholder="Filter contacts"
									aria-label="FriendSearch" data-listfilter="#js-msgr-listfilter">
							</div>
							<div class="flex-1 h-100 custom-scroll">
								<div class="w-100">
									<ul id="js-msgr-listfilter" class="list-unstyled m-0">
										<li><a href="#"
											class="d-table w-100 px-2 py-2 text-dark hover-white"
											data-filter-tags="tracey chang online">
												<div
													class="d-table-cell align-middle status status-success status-sm ">
													<span class="profile-image-md rounded-circle d-block"
														style="background-image: url('img/demo/avatars/avatar-d.png'); background-size: cover;"></span>
												</div>
												<div class="d-table-cell w-100 align-middle pl-2 pr-2">
													<div class="text-truncate text-truncate-md">
														Tracey Chang <small
															class="d-block font-italic text-success fs-xs">
															Online </small>
													</div>
												</div>
										</a></li>
										<li><a href="#"
											class="d-table w-100 px-2 py-2 text-dark hover-white"
											data-filter-tags="oliver kopyuv online">
												<div
													class="d-table-cell align-middle status status-success status-sm ">
													<span class="profile-image-md rounded-circle d-block"
														style="background-image: url('img/demo/avatars/avatar-b.png'); background-size: cover;"></span>
												</div>
												<div class="d-table-cell w-100 align-middle pl-2 pr-2">
													<div class="text-truncate text-truncate-md">
														Oliver Kopyuv <small
															class="d-block font-italic text-success fs-xs">
															Online </small>
													</div>
												</div>
										</a></li>
										<li><a href="#"
											class="d-table w-100 px-2 py-2 text-dark hover-white"
											data-filter-tags="dr john cook phd away">
												<div
													class="d-table-cell align-middle status status-warning status-sm ">
													<span class="profile-image-md rounded-circle d-block"
														style="background-image: url('img/demo/avatars/avatar-e.png'); background-size: cover;"></span>
												</div>
												<div class="d-table-cell w-100 align-middle pl-2 pr-2">
													<div class="text-truncate text-truncate-md">
														Dr. John Cook PhD <small class="d-block font-italic fs-xs">
															Away </small>
													</div>
												</div>
										</a></li>
										<li><a href="#"
											class="d-table w-100 px-2 py-2 text-dark hover-white"
											data-filter-tags="ali amdaney online">
												<div
													class="d-table-cell align-middle status status-success status-sm ">
													<span class="profile-image-md rounded-circle d-block"
														style="background-image: url('img/demo/avatars/avatar-g.png'); background-size: cover;"></span>
												</div>
												<div class="d-table-cell w-100 align-middle pl-2 pr-2">
													<div class="text-truncate text-truncate-md">
														Ali Amdaney <small
															class="d-block font-italic fs-xs text-success">
															Online </small>
													</div>
												</div>
										</a></li>
										<li><a href="#"
											class="d-table w-100 px-2 py-2 text-dark hover-white"
											data-filter-tags="sarah mcbrook online">
												<div
													class="d-table-cell align-middle status status-success status-sm">
													<span class="profile-image-md rounded-circle d-block"
														style="background-image: url('img/demo/avatars/avatar-h.png'); background-size: cover;"></span>
												</div>
												<div class="d-table-cell w-100 align-middle pl-2 pr-2">
													<div class="text-truncate text-truncate-md">
														Sarah McBrook <small
															class="d-block font-italic fs-xs text-success">
															Online </small>
													</div>
												</div>
										</a></li>
										<li><a href="#"
											class="d-table w-100 px-2 py-2 text-dark hover-white"
											data-filter-tags="ali amdaney offline">
												<div class="d-table-cell align-middle status status-sm">
													<span class="profile-image-md rounded-circle d-block"
														style="background-image: url('img/demo/avatars/avatar-a.png'); background-size: cover;"></span>
												</div>
												<div class="d-table-cell w-100 align-middle pl-2 pr-2">
													<div class="text-truncate text-truncate-md">
														oliver.kopyuv@gotbootstrap.com <small
															class="d-block font-italic fs-xs"> Offline </small>
													</div>
												</div>
										</a></li>
										<li><a href="#"
											class="d-table w-100 px-2 py-2 text-dark hover-white"
											data-filter-tags="ali amdaney busy">
												<div
													class="d-table-cell align-middle status status-danger status-sm">
													<span class="profile-image-md rounded-circle d-block"
														style="background-image: url('img/demo/avatars/avatar-j.png'); background-size: cover;"></span>
												</div>
												<div class="d-table-cell w-100 align-middle pl-2 pr-2">
													<div class="text-truncate text-truncate-md">
														oliver.kopyuv@gotbootstrap.com <small
															class="d-block font-italic fs-xs text-danger">
															Busy </small>
													</div>
												</div>
										</a></li>
										<li><a href="#"
											class="d-table w-100 px-2 py-2 text-dark hover-white"
											data-filter-tags="ali amdaney offline">
												<div class="d-table-cell align-middle status status-sm">
													<span class="profile-image-md rounded-circle d-block"
														style="background-image: url('img/demo/avatars/avatar-c.png'); background-size: cover;"></span>
												</div>
												<div class="d-table-cell w-100 align-middle pl-2 pr-2">
													<div class="text-truncate text-truncate-md">
														oliver.kopyuv@gotbootstrap.com <small
															class="d-block font-italic fs-xs"> Offline </small>
													</div>
												</div>
										</a></li>
										<li><a href="#"
											class="d-table w-100 px-2 py-2 text-dark hover-white"
											data-filter-tags="ali amdaney inactive">
												<div class="d-table-cell align-middle">
													<span class="profile-image-md rounded-circle d-block"
														style="background-image: url('img/demo/avatars/avatar-m.png'); background-size: cover;"></span>
												</div>
												<div class="d-table-cell w-100 align-middle pl-2 pr-2">
													<div class="text-truncate text-truncate-md">
														+714651347790 <small
															class="d-block font-italic fs-xs opacity-50">
															Missed Call </small>
													</div>
												</div>
										</a></li>
									</ul>
									<div class="filter-message js-filter-message"></div>
								</div>
							</div>
							<div>
								<a class="fs-xl d-flex align-items-center p-3"> <i
									class="fal fa-cogs"></i>
								</a>
							</div>
						</div>
						<!-- END msgr-list -->
						<!-- BEGIN msgr -->
						<div class="msgr d-flex h-100 flex-column bg-white">
							<!-- BEGIN custom-scroll -->
							<div class="custom-scroll flex-1 h-100">
								<div id="chat_container" class="w-100 p-4">
									<!-- start .chat-segment -->
									<div class="chat-segment">
										<div class="time-stamp text-center mb-2 fw-400">Jun 19</div>
									</div>
									<!--  end .chat-segment -->
									<!-- start .chat-segment -->
									<div class="chat-segment chat-segment-sent">
										<div class="chat-message">
											<p>Hey Ching, did you get my files?</p>
										</div>
										<div class="text-right fw-300 text-muted mt-1 fs-xs">
											3:00 pm</div>
									</div>
									<!--  end .chat-segment -->
									<!-- start .chat-segment -->
									<div class="chat-segment chat-segment-get">
										<div class="chat-message">
											<p>Hi</p>
											<p>Sorry going through a busy time in office. Yes I
												analyzed the solution.</p>
											<p>It will require some resource, which I could not
												manage.</p>
										</div>
										<div class="fw-300 text-muted mt-1 fs-xs">3:24 pm</div>
									</div>
									<!--  end .chat-segment -->
									<!-- start .chat-segment -->
									<div class="chat-segment chat-segment-sent chat-start">
										<div class="chat-message">
											<p>Okay</p>
										</div>
									</div>
									<!--  end .chat-segment -->
									<!-- start .chat-segment -->
									<div class="chat-segment chat-segment-sent chat-end">
										<div class="chat-message">
											<p>Sending you some dough today, you can allocate the
												resources to this project.</p>
										</div>
										<div class="text-right fw-300 text-muted mt-1 fs-xs">
											3:26 pm</div>
									</div>
									<!--  end .chat-segment -->
									<!-- start .chat-segment -->
									<div class="chat-segment chat-segment-get chat-start">
										<div class="chat-message">
											<p>Perfect. Thanks a lot!</p>
										</div>
									</div>
									<!--  end .chat-segment -->
									<!-- start .chat-segment -->
									<div class="chat-segment chat-segment-get">
										<div class="chat-message">
											<p>I will have them ready by tonight.</p>
										</div>
									</div>
									<!--  end .chat-segment -->
									<!-- start .chat-segment -->
									<div class="chat-segment chat-segment-get chat-end">
										<div class="chat-message">
											<p>Cheers</p>
										</div>
									</div>
									<!--  end .chat-segment -->
									<!-- start .chat-segment for timestamp -->
									<div class="chat-segment">
										<div class="time-stamp text-center mb-2 fw-400">Jun 20</div>
									</div>
									<!--  end .chat-segment for timestamp -->
								</div>
							</div>
							<!-- END custom-scroll  -->
							<!-- BEGIN msgr__chatinput -->
							<div class="d-flex flex-column">
								<div
									class="border-faded border-right-0 border-bottom-0 border-left-0 flex-1 mr-3 ml-3 position-relative shadow-top">
									<div class="pt-3 pb-1 pr-0 pl-0 rounded-0" tabindex="-1">
										<div id="msgr_input" contenteditable="true"
											data-placeholder="Type your message here..."
											class="height-10 form-content-editable"></div>
									</div>
								</div>
								<div
									class="height-8 px-3 d-flex flex-row align-items-center flex-wrap flex-shrink-0">
									<a href="javascript:void(0);"
										class="btn btn-icon fs-xl width-1 mr-1" data-toggle="tooltip"
										data-original-title="More options" data-placement="top"> <i
										class="fal fa-ellipsis-v-alt color-fusion-300"></i>
									</a> <a href="javascript:void(0);" class="btn btn-icon fs-xl mr-1"
										data-toggle="tooltip" data-original-title="Attach files"
										data-placement="top"> <i
										class="fal fa-paperclip color-fusion-300"></i>
									</a> <a href="javascript:void(0);" class="btn btn-icon fs-xl mr-1"
										data-toggle="tooltip" data-original-title="Insert photo"
										data-placement="top"> <i
										class="fal fa-camera color-fusion-300"></i>
									</a>
									<div class="ml-auto">
										<a href="javascript:void(0);" class="btn btn-info">Send</a>
									</div>
								</div>
							</div>
							<!-- END msgr__chatinput -->
						</div>
						<!-- END msgr -->
					</div>
				</div>
			</div>
		</div>
		<!-- END Messenger -->
		<!-- BEGIN Page Settings -->
		<div class="modal fade js-modal-settings modal-backdrop-transparent"
			tabindex="-1" role="dialog" aria-hidden="true">
			<div class="modal-dialog modal-dialog-right modal-md">
				<div class="modal-content">
					<div
						class="dropdown-header bg-trans-gradient d-flex justify-content-center align-items-center w-100">
						<h4 class="m-0 text-center color-white">
							Layout Settings <small class="mb-0 opacity-80">User
								Interface Settings</small>
						</h4>
						<button type="button"
							class="close text-white position-absolute pos-top pos-right p-2 m-1 mr-2"
							data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true"><i class="fal fa-times"></i></span>
						</button>
					</div>
					<div class="modal-body p-0">
						<div class="settings-panel">
							<div class="mt-4 d-table w-100 px-5">
								<div class="d-table-cell align-middle">
									<h5 class="p-0">App Layout</h5>
								</div>
							</div>
							<div class="list" id="fh">
								<a href="#" onclick="return false;" class="btn btn-switch"
									data-action="toggle" data-class="header-function-fixed"></a> <span
									class="onoffswitch-title">Fixed Header</span> <span
									class="onoffswitch-title-desc">header is in a fixed at
									all times</span>
							</div>
							<div class="list" id="nff">
								<a href="#" onclick="return false;" class="btn btn-switch"
									data-action="toggle" data-class="nav-function-fixed"></a> <span
									class="onoffswitch-title">Fixed Navigation</span> <span
									class="onoffswitch-title-desc">left panel is fixed</span>
							</div>
							<div class="list" id="nfm">
								<a href="#" onclick="return false;" class="btn btn-switch"
									data-action="toggle" data-class="nav-function-minify"></a> <span
									class="onoffswitch-title">Minify Navigation</span> <span
									class="onoffswitch-title-desc">Skew nav to maximize
									space</span>
							</div>
							<div class="list" id="nfh">
								<a href="#" onclick="return false;" class="btn btn-switch"
									data-action="toggle" data-class="nav-function-hidden"></a> <span
									class="onoffswitch-title">Hide Navigation</span> <span
									class="onoffswitch-title-desc">roll mouse on edge to
									reveal</span>
							</div>
							<div class="list" id="nft">
								<a href="#" onclick="return false;" class="btn btn-switch"
									data-action="toggle" data-class="nav-function-top"></a> <span
									class="onoffswitch-title">Top Navigation</span> <span
									class="onoffswitch-title-desc">Relocate left pane to top</span>
							</div>
							<div class="list" id="mmb">
								<a href="#" onclick="return false;" class="btn btn-switch"
									data-action="toggle" data-class="mod-main-boxed"></a> <span
									class="onoffswitch-title">Boxed Layout</span> <span
									class="onoffswitch-title-desc">Encapsulates to a
									container</span>
							</div>
							<div class="expanded">
								<ul class="">
									<li>
										<div class="bg-fusion-50" data-action="toggle"
											data-class="mod-bg-1"></div>
									</li>
									<li>
										<div class="bg-warning-200" data-action="toggle"
											data-class="mod-bg-2"></div>
									</li>
									<li>
										<div class="bg-primary-200" data-action="toggle"
											data-class="mod-bg-3"></div>
									</li>
									<li>
										<div class="bg-success-300" data-action="toggle"
											data-class="mod-bg-4"></div>
									</li>
								</ul>
								<div class="list" id="mbgf">
									<a href="#" onclick="return false;" class="btn btn-switch"
										data-action="toggle" data-class="mod-fixed-bg"></a> <span
										class="onoffswitch-title">Fixed Background</span>
								</div>
							</div>
							<!-- <div class="mt-4 d-table w-100 px-5">
                            <div class="d-table-cell align-middle">
                                <h5 class="p-0">
                                    Mobile Menu
                                </h5>
                            </div>
                        </div>
                        <div class="list" id="nmp">
                            <a href="#" onclick="return false;" class="btn btn-switch" data-action="toggle"
                                data-class="nav-mobile-push"></a>
                            <span class="onoffswitch-title">Push Content</span>
                            <span class="onoffswitch-title-desc">Content pushed on menu reveal</span>
                        </div>
                        <div class="list" id="nmno">
                            <a href="#" onclick="return false;" class="btn btn-switch" data-action="toggle"
                                data-class="nav-mobile-no-overlay"></a>
                            <span class="onoffswitch-title">No Overlay</span>
                            <span class="onoffswitch-title-desc">Removes mesh on menu reveal</span>
                        </div>
                        <div class="list" id="sldo">
                            <a href="#" onclick="return false;" class="btn btn-switch" data-action="toggle"
                                data-class="nav-mobile-slide-out"></a>
                            <span class="onoffswitch-title">Off-Canvas <sup>(beta)</sup></span>
                            <span class="onoffswitch-title-desc">Content overlaps menu</span>
                        </div> -->
							<div class="mt-4 d-table w-100 px-5">
								<div class="d-table-cell align-middle">
									<h5 class="p-0">Accessibility</h5>
								</div>
							</div>
							<div class="list" id="mbf">
								<a href="#" onclick="return false;" class="btn btn-switch"
									data-action="toggle" data-class="mod-bigger-font"></a> <span
									class="onoffswitch-title">Bigger Content Font</span> <span
									class="onoffswitch-title-desc">content fonts are bigger
									for readability</span>
							</div>
							<div class="list" id="mhc">
								<a href="#" onclick="return false;" class="btn btn-switch"
									data-action="toggle" data-class="mod-high-contrast"></a> <span
									class="onoffswitch-title">High Contrast Text (WCAG 2 AA)</span>
								<span class="onoffswitch-title-desc">4.5:1 text contrast
									ratio</span>
							</div>
							<div class="list" id="mcb">
								<a href="#" onclick="return false;" class="btn btn-switch"
									data-action="toggle" data-class="mod-color-blind"></a> <span
									class="onoffswitch-title">Daltonism <sup>(beta)</sup>
								</span> <span class="onoffswitch-title-desc">color vision
									deficiency</span>
							</div>
							<div class="list" id="mpc">
								<a href="#" onclick="return false;" class="btn btn-switch"
									data-action="toggle" data-class="mod-pace-custom"></a> <span
									class="onoffswitch-title">Preloader Inside</span> <span
									class="onoffswitch-title-desc">preloader will be inside
									content</span>
							</div>
							<div class="mt-4 d-table w-100 px-5">
								<div class="d-table-cell align-middle">
									<h5 class="p-0">Global Modifications</h5>
								</div>
							</div>
							<div class="list" id="mcbg">
								<a href="#" onclick="return false;" class="btn btn-switch"
									data-action="toggle" data-class="mod-clean-page-bg"></a> <span
									class="onoffswitch-title">Clean Page Background</span> <span
									class="onoffswitch-title-desc">adds more whitespace</span>
							</div>
							<div class="list" id="mhni">
								<a href="#" onclick="return false;" class="btn btn-switch"
									data-action="toggle" data-class="mod-hide-nav-icons"></a> <span
									class="onoffswitch-title">Hide Navigation Icons</span> <span
									class="onoffswitch-title-desc">invisible navigation
									icons</span>
							</div>
							<div class="list" id="dan">
								<a href="#" onclick="return false;" class="btn btn-switch"
									data-action="toggle" data-class="mod-disable-animation"></a> <span
									class="onoffswitch-title">Disable CSS Animation</span> <span
									class="onoffswitch-title-desc">Disables CSS based
									animations</span>
							</div>
							<div class="list" id="mhic">
								<a href="#" onclick="return false;" class="btn btn-switch"
									data-action="toggle" data-class="mod-hide-info-card"></a> <span
									class="onoffswitch-title">Hide Info Card</span> <span
									class="onoffswitch-title-desc">Hides info card from left
									panel</span>
							</div>
							<div class="list" id="mlph">
								<a href="#" onclick="return false;" class="btn btn-switch"
									data-action="toggle" data-class="mod-lean-subheader"></a> <span
									class="onoffswitch-title">Lean Subheader</span> <span
									class="onoffswitch-title-desc">distinguished page header</span>
							</div>
							<div class="list" id="mnl">
								<a href="#" onclick="return false;" class="btn btn-switch"
									data-action="toggle" data-class="mod-nav-link"></a> <span
									class="onoffswitch-title">Hierarchical Navigation</span> <span
									class="onoffswitch-title-desc">Clear breakdown of nav
									links</span>
							</div>
							<div class="list mt-1">
								<span class="onoffswitch-title">Global Font Size <small>(RESETS
										ON REFRESH)</small>
								</span>
								<div class="btn-group btn-group-sm btn-group-toggle my-2"
									data-toggle="buttons">
									<label class="btn btn-default btn-sm" data-action="toggle-swap"
										data-class="root-text-sm" data-target="html"> <input
										type="radio" name="changeFrontSize"> SM </label> <label
										class="btn btn-default btn-sm" data-action="toggle-swap"
										data-class="root-text" data-target="html"> <input
										type="radio" name="changeFrontSize" checked=""> MD </label> <label
										class="btn btn-default btn-sm" data-action="toggle-swap"
										data-class="root-text-lg" data-target="html"> <input
										type="radio" name="changeFrontSize"> LG </label> <label
										class="btn btn-default btn-sm" data-action="toggle-swap"
										data-class="root-text-xl" data-target="html"> <input
										type="radio" name="changeFrontSize"> XL </label>
								</div>
								<span class="onoffswitch-title-desc d-block mb-g">Change
									<strong>root</strong> font size to effect rem values
								</span>
							</div>
							<div class="mt-2 d-table w-100 pl-5 pr-3">
								<div class="d-table-cell align-middle">
									<h5 class="p-0">
										Theme colors <small>(overlays base css)</small>
									</h5>
									<!-- <div class="fs-xs text-muted p-2 alert alert-warning mt-3 mb-0">
                                    <i class="fal fa-exclamation-triangle text-warning mr-2"></i>Due to network latency
                                    and CPU utilization, you may experience a brief flickering effect on page load which
                                    may show the intial applied theme for a split second. Setting the prefered
                                    style/theme in the header will prevent this from happening.
                                </div> -->
								</div>
							</div>
							<div class="expanded theme-colors pl-5 pr-3">
								<ul class="m-0">
									<li><a href="#" id="myapp-0" data-action="theme-update"
										data-themesave data-theme="" data-toggle="tooltip"
										data-placement="top" title="Wisteria (base css)"
										data-original-title="Wisteria (base css)"></a></li>
									<li><a href="#" id="myapp-1" data-action="theme-update"
										data-themesave data-theme="css/themes/cust-theme-1.css"
										data-toggle="tooltip" data-placement="top" title="Tapestry"
										data-original-title="Tapestry"></a></li>
									<li><a href="#" id="myapp-2" data-action="theme-update"
										data-themesave data-theme="css/themes/cust-theme-2.css"
										data-toggle="tooltip" data-placement="top" title="Atlantis"
										data-original-title="Atlantis"></a></li>
									<li><a href="#" id="myapp-3" data-action="theme-update"
										data-themesave data-theme="css/themes/cust-theme-3.css"
										data-toggle="tooltip" data-placement="top" title="Indigo"
										data-original-title="Indigo"></a></li>
									<li><a href="#" id="myapp-4" data-action="theme-update"
										data-themesave data-theme="css/themes/cust-theme-4.css"
										data-toggle="tooltip" data-placement="top" title="Dodger Blue"
										data-original-title="Dodger Blue"></a></li>
									<li><a href="#" id="myapp-5" data-action="theme-update"
										data-themesave data-theme="css/themes/cust-theme-5.css"
										data-toggle="tooltip" data-placement="top" title="Tradewind"
										data-original-title="Tradewind"></a></li>
									<li><a href="#" id="myapp-6" data-action="theme-update"
										data-themesave data-theme="css/themes/cust-theme-6.css"
										data-toggle="tooltip" data-placement="top" title="Cranberry"
										data-original-title="Cranberry"></a></li>
									<li><a href="#" id="myapp-7" data-action="theme-update"
										data-themesave data-theme="css/themes/cust-theme-7.css"
										data-toggle="tooltip" data-placement="top" title="Oslo Gray"
										data-original-title="Oslo Gray"></a></li>
									<li><a href="#" id="myapp-8" data-action="theme-update"
										data-themesave data-theme="css/themes/cust-theme-8.css"
										data-toggle="tooltip" data-placement="top"
										title="Chetwode Blue" data-original-title="Chetwode Blue"></a></li>
									<li><a href="#" id="myapp-9" data-action="theme-update"
										data-themesave data-theme="css/themes/cust-theme-9.css"
										data-toggle="tooltip" data-placement="top" title="Apricot"
										data-original-title="Apricot"></a></li>
									<li><a href="#" id="myapp-10" data-action="theme-update"
										data-themesave data-theme="css/themes/cust-theme-10.css"
										data-toggle="tooltip" data-placement="top" title="Blue Smoke"
										data-original-title="Blue Smoke"></a></li>
									<li><a href="#" id="myapp-11" data-action="theme-update"
										data-themesave data-theme="css/themes/cust-theme-11.css"
										data-toggle="tooltip" data-placement="top" title="Green Smoke"
										data-original-title="Green Smoke"></a></li>
									<li><a href="#" id="myapp-12" data-action="theme-update"
										data-themesave data-theme="css/themes/cust-theme-12.css"
										data-toggle="tooltip" data-placement="top"
										title="Wild Blue Yonder"
										data-original-title="Wild Blue Yonder"></a></li>
									<li><a href="#" id="myapp-13" data-action="theme-update"
										data-themesave data-theme="css/themes/cust-theme-13.css"
										data-toggle="tooltip" data-placement="top" title="Emerald"
										data-original-title="Emerald"></a></li>
								</ul>
							</div>
							<hr class="mb-0 mt-4">
								<div class="pl-5 pr-3 py-3 bg-faded">
									<div class="row no-gutters">
										<div class="col-6 pr-1">
											<a href="#" class="btn btn-outline-danger fw-500 btn-block"
												data-action="app-reset">Reset Settings</a>
										</div>
										<div class="col-6 pl-1">
											<a href="#" class="btn btn-danger fw-500 btn-block"
												data-action="factory-reset">Factory Reset</a>
										</div>
									</div>
								</div>
						</div>
						<span id="saving"></span>
					</div>
				</div>
			</div>
		</div>
		<!-- END Page Settings -->
		
		<style>
			#usersetupdetails_filter .form-control{
				height: 30px;
			}
			#topmenu_wrapper, #category_wrapper, #submenu_wrapper, .row:first-child{
				margin-bottom: 0!important;
			}
			.tabulator .tabulator-tableholder{
				overflow-x: hidden;
			}
			.floatingFields label{
				top:0px;	
			}
			.floatingFields input:focus + label, .floatingFields input:not(:placeholder-shown) + label{
				top:0px;
			}
			.form-group.focused .selectFloating{
				background: #fff;
			}
			
			@media screen and (max-width: 1370px) {
				#menulist-table{
					height: 330px!important;
				}
			}
			@media screen and (max-width: 1024px) {
			    .page-content-wrapper {
			        margin-top: 0!important;
			    }
			}
			.Acolour .tabulator-cell{
				color:#107066;
			}
			.Icolour .tabulator-cell{
				color:#ce0262;
			}
		</style>

		<div th:replace="~{fragments/script :: script}"></div>
		<script src="js/staticjs.js"></script>
		<script>
			
		var activeMenus=[];
		var inactiveMenus=[];
		
			// Define Test Data
		var tabledatamenulist = [];
			 
			    var numRecords=17;

			    tabledatamenulist = Array.from({ length: numRecords }, () => ({
			    menu: "",
			    menuname: "",
			    topMenuCategory: "",
				 }));
			
			
			//Define Table
			var table = new Tabulator("#menulist-table", {
			  layout: "fitColumns",
			  data: tabledatamenulist,
			  height: '450px',
			  printAsHtml: true,
			  printStyled: true,
			  columns: [
				{
					title: "Menu#",
					headerTooltip:"Menu#",
					field: "menu",
					sorter: customSorter,
					cellMouseOver: function (e, cell) {
				          const data = cell.getRow().getData();
				          if (data.menu) {
				              showCustomTooltip(e, cell, `${data.menu}`);
				            }
				        },
				    cellMouseMove: moveCustomTooltip,
				    cellMouseOut: hideCustomTooltip,
					width: 100
				},
				{
					title: "Menu Name",
					headerTooltip:"Menu Name",
					field: "menuname",
					sorter: customSorter,
					cellMouseOver: function (e, cell) {
				          const data = cell.getRow().getData();
				          if (data.menuname) {
				              showCustomTooltip(e, cell, `${data.menuname}`);
				            }
				        },
				    cellMouseMove: moveCustomTooltip,
				    cellMouseOut: hideCustomTooltip
				},
				{
					title: "MenStatus",
					field: "status",	
					visible: false,
				},
				{
					title: "ScreenCode",
					field: "screen_code",
					visible: false,
				}
			  ],rowFormatter: function(row) {
				    var rowData = row.getData();
				    var rowcolor=rowData.status+'colour';
				    var rowElement = row.getElement();
				    rowElement.classList.add(rowcolor);
			  }
			});
			
             table.on("rowClick", function (e, row) {
				
				var rowData = row.getData();
				var menuCode = rowData.menu;
				var menuName = rowData.menuname;
				var menuStatus = rowData.status;
				var screenCode = rowData.screen_code;
				var flagInsertUpdate = 'U';
				SubMenuValue(menuCode);
				
				$('#menuCodeSubMenu').val(menuCode);
				$('#menuCodeInsertUpdate').val(menuCode);
				$('#menuInsertUpdate').val(menuName);
				$('#screenCodeInsertUpdate').val(screenCode);
				$('#flagInsertUpdate').val(flagInsertUpdate);
				$('#menuInsertUpdate').attr('data-MenuName-type', menuName);
				
				if(menuStatus==='A'){
					$('#menuStatusInsertUpdate').prop('checked', true);
				}else{
					$('#menuStatusInsertUpdate').prop('checked', false);
				}
				
             });
			
			function applyFilter() {
			     var searchTerm = document.getElementById("searchMenuSetup").value.trim().toLowerCase();

			     if (searchTerm === "") {
			         table.clearFilter();
			     } else {
			         table.setFilter([
			             [
			                 { field: "menu", type: "like", value: searchTerm },
			                 { field: "menuname", type: "like", value: searchTerm }
			             ]
			         ]);
			     }
			 }
			
			 document.getElementById("Searching").addEventListener("click", function () {
			     applyFilter();
			 });

			 document.getElementById("searchMenuSetup").addEventListener("input", function () {
			     applyFilter();
			 });
			
			// Define Test Data
			var menusetuptable = [];
			
			var numRecords1=11;

			menusetuptable = Array.from({ length: numRecords1 }, () => ({
				submenuCode: "",
				submenu: "",
				screen: "",
				checkbox: "I",
			 }));
			
			//Define Table
			var table1 = new Tabulator("#menusetup-table", {
			  layout: "fitColumns",
			  data: menusetuptable,
			  height: '300px',
			  printAsHtml: true,
			  printStyled: true,
			  columns: [
				  {
						title: "Submenu#",
						headerTooltip:"Submenu#",
						field: "submenuCode",
						editor: "input",
						sorter: customSorter,
						cellMouseOver: function (e, cell) {
					          const data = cell.getRow().getData();
					          if (data.submenuCode) {
					              showCustomTooltip(e, cell, `${data.submenuCode}`);
					            }
					        },
					    cellMouseMove: moveCustomTooltip,
					    cellMouseOut: hideCustomTooltip,
						width: 100,
					},
				  {
					title: "Sub Menu",
					headerTooltip:"Sub Menu",
					field: "submenu",
					sorter: customSorter,
					cellMouseOver: function (e, cell) {
				          const data = cell.getRow().getData();
				          if (data.submenu) {
				              showCustomTooltip(e, cell, `${data.submenu}`);
				            }
				        },
				    cellMouseMove: moveCustomTooltip,
				    cellMouseOut: hideCustomTooltip,
					editor: "input",
				},
				{ 
					title: "Icon", 
					field: "uploadedIcon", 
					formatter: function(cell) {
						const imgSrc = cell.getValue();
						if (imgSrc) {
							return `<img src="${imgSrc}" class="rounded-circle" width="30" height="30"/>`;
						}
						return ''; // or return placeholder
					}, 
					width: 60 
				},
				{
					title: "",
					field: "",
					headerTooltip:"",
					formatter: plushIcon,
					headerSort: false,
					width: 40,
				},
				{
					title: "Screen#",
					headerTooltip:"Screen#",
					field: "screen",
					sorter: customSorter,
					cellMouseOver: function (e, cell) {
				          const data = cell.getRow().getData();
				          if (data.screen) {
				              showCustomTooltip(e, cell, `${data.screen}`);
				            }
				        },
				    cellMouseMove: moveCustomTooltip,
				    cellMouseOut: hideCustomTooltip,
					editor: "input",
					width: 150,
				},
				{
					title: "Status",
					headerTooltip:"Status",
					headerTooltip:"Status",
					field: "checkbox",
					 headerSort: false,
					/* formatter: (cell) => {
			            const value = cell.getValue();
			            if (value) {
			                return `
			                    <input type="checkbox" />
			                    <label>${value}</label>
			                `;
			            }
			        }, */
			        formatter: (cell) => {
			            const value = cell.getValue();
			            if (value) {
			                const isChecked = value === "A" ? "checked" : "unchecked";
			                return `
			                    <input type="checkbox" ${isChecked} />
			                    <label>${value}</label>
			                `;
			            }
			            return "";
			        },
					width: 70,
				},
				{
					title: "ScreenUrl",
					field: "SCREEN_URL",
					visible: false,
				},
				{
					title: "MenuCode",
					field: "menuCode",
					visible: false,
				}
			  ]
			});
			
			table1.on("cellEdited", function(cell) {
				 const rowData = cell.getRow().getData();
				 const row = cell.getRow();
				    if (rowData.addClassRow === true) {
				    	row.update({
				            updatedColumn: false
				        });
				    	console.log("addClassRow: true");
				    } else {
				    	row.update({
				            updatedColumn: true
				        });
				    	console.log("addClassRow: false");
				    }
				});
			
//		$(menusetuptable[0].checkbox).html("<input type='checkbox'>");
		
		MainMenuValue();
		
		function MainMenuValue(){
		 $.ajax({
			  url: 'MenuSetupMenuValue',
			  type: 'GET',
			  contentType: 'application/json',
			  success: function(response) {
				  tabledatamenulist = [];
				  inactiveMenus = [];
				  activeMenus = [];
				  $.each(response, function(index, item) {
					  var value1 = item.menuCode;
					  var value2 = item.menuName;
					  var value3 = item.status;
					  var value4 = item.screen_code=== null ? '' : item.screen_code;
					  inactiveMenus.push({
		        			menu: value1,
		        			menuname: value2,
		        			status: value3,	
		        			screen_code: value4
		        		}); 
					  
				  });
				  
				   activeMenus = inactiveMenus.filter(item => item.status === 'A');
				   if(activeMenus.length<=17){
			        	var numRecordsTabulator=17;
			        	var Dlength=activeMenus.length;
			        	 var extraRecord=numRecordsTabulator-Dlength;
			    		var tabledatacontacttypeExtra = [];
			        	tabledatacontacttypeExtra = Array.from({ length: extraRecord }, () => ({
			        		value1: "",
			        		value2: "",
			        		value3: "",
			        		value4: "",
								   }));
			        	activeMenus=activeMenus.concat(tabledatacontacttypeExtra);
			        	}
				  table.setData(activeMenus); 
				  
			  },
		  }); 
		}
		 
		function SubMenuValue(menuCode){   
			 $.ajax({
				  url: 'getSubMenuSetup',
				  type: 'GET',
				  data: {
			        	 p_menu_code : menuCode
						}, 
				  success: function(response) {
				 	  menusetuptable = [];
					  $.each(response, function(index, item) {
						  var value1 = item.SUB_MENU_CODE;
						  var value2 = item.SUB_MENU_NAME;
						  var value3 = item.STATUS;
						  var value4 = item.SCREEN_CODE=== null ? '' : item.SCREEN_CODE;
						  var Value5 = item.SCREEN_URL;
						  menusetuptable.push({
							  submenuCode: value1,
							  submenu: value2,
							  checkbox: value3,	
							  screen: value4,
			             	  SCREEN_URL: Value5,
			             	  addClassRow: false,
			             	 updateClassRow: false
			        		}); 
						  
					  }); 
					  
					   if(response.length<=11){
				        	var numRecordsTabulator=11;
				        	var Dlength=response.length;
				        	 var extraRecord=numRecordsTabulator-Dlength;
				    		var tabledatacontacttypeExtra = [];
				        	tabledatacontacttypeExtra = Array.from({ length: extraRecord }, () => ({
				        		submenuCode: "",
				        		submenu: "",
				        		checkbox: "",
				        		screen: "",
				        		SCREEN_URL: "",
				        		addClassRow: "",
				        		updateClassRow: "",
									   }));
				        	menusetuptable=menusetuptable.concat(tabledatacontacttypeExtra);
				        	}
					  
					  table1.setData(menusetuptable);  
					  
				  },
			  }); 
			}
	 	 
		 $(document).on('click', '#includeInactive', function (e) {
			 tabledatamenulist=[];
			 table.setData(inactiveMenus);
		 }); 
	
	 	 $(document).on('click','#clearButton', function (e){
	 		 $('#searchMenuSetup').val(''); 
	 		applyFilter();
	 		 $('.emptyMenuSetup').val('');
	 		 console.log('clear button')
			 tabledatamenulist=[];
			 table.setData(activeMenus);
			 console.log('clear button1')
			
		 }); 
	 	 
	 	 $(document).on('click', '#AddButton', function (e) {
	 		var value = '';
	      	$('#menuInsertUpdate').val(value);
	 		$('#menuCodeInsertUpdate').val(value);
	 		$('#menuStatusInsertUpdate').val(value);
	 		$('#screenCodeInsertUpdate').val(value);
	 		var flagInsertUpdate = 'I';
			$('#flagInsertUpdate').val(flagInsertUpdate);
	  });
	 	 
	 	$('#addSubMenu').on('click', function () {
	 		//menuCodeSubMenu
	 		var menuCode = $('#menuCodeSubMenu').val();
	 		const newRowData = {
	 				submenuCode: "",
					submenu: "",
					screen: "",
					checkbox: "I",   
					menuCode:menuCode,
					addClassRow: true,
					updateClassRow: false
			};
	 		
	 		table1.addData(newRowData, true); 
	 		
	 	});
		 
	 	function callMainMenu(){
	 		MainMenuValue();
	 	}
	 	 //Save button
	 	 function ImageConvert(file) {
    return new Promise((resolve, reject) => {
        const reader = new FileReader();

        reader.onload = function (event) {
            const base64String = event.target.result.split(',')[1]; // remove data:image/... prefix
            resolve(base64String);
        };

        reader.onerror = function (error) {
            reject(error);
        };

        reader.readAsDataURL(file);
    });
}
	 	 $(document).on('click', '#saveMenSetup', function (e) {
	 		
	 		 var menuNameInsert = $('#menuInsertUpdate').val();
	 		 var menuCodeInsert = $('#menuCodeInsertUpdate').val();
	 		 var statusInsert = $('#menuStatusInsertUpdate').is(':checked') ? 'A' : 'I';
	 		 var screenCode = $('#screenCodeInsertUpdate').val();
	 		 var flagInsertUpdate = $('#flagInsertUpdate').val();
	 		  selectedFile;
	 		 var convertImage = ImageConvert(selectedFile);
	 		 if(selectedFile!=null){
	 			console.log(' file save for menu '+convertImage);
	 		 }else{
	 			 console.log(' need to save image ')
	 		 } 
	 	 	
	 		

	 	   /* if (!selectedFile) {
	 	        console.log('❌ No file selected.');
	 	      } else {
	 	        console.log('✅ File selected:');
	 	        console.log('Name:', selectedFile.name);
	 	        console.log('Type:', selectedFile.type);
	 	        console.log('Size:', selectedFile.size + ' bytes');
	 	      } */

	 	  const formData = new FormData();
	 	  formData.append('p_menu_code', menuCodeInsert);
	 	  formData.append('p_menu_name', menuNameInsert);
	 	  formData.append('p_status', statusInsert);

	 	  if (selectedFile) {
	 	    formData.append('p_icon', selectedFile); 
	 	  }
	 	  
	 		var compareMenuName=document.querySelector('#menuInsertUpdate').getAttribute('data-MenuName-type');
	// 		 console.log("Status="+menuNameInsert+" "+menuCodeInsert+" "+statusInsert+" "+screenCode+"=hi");
	 		
	 		var insertSubMenu = table1.getData().filter(row => row.addClassRow===true);
	 		var updateSubMenu = table1.getData().filter(row => row.updatedColumn===true);
	 		var subMenu = updateSubMenu.map(row => row.submenu);
	 		console.log("upade subMenu"+subMenu)
	// 		console.log("SubMenu="+menuCodeSubMenu+" "+subMenu+" "+subMenuCode+" "+subMenuStatus+" "+subMenuScreenCode);
	 		if(updateSubMenu.length){
	 			var value1 = updateSubMenu.map(row => row.submenu);
	 			var value2 = updateSubMenu.map(row => row.submenuCode);
	 			var value3 =  updateSubMenu.map(row => row.checkbox);
	 			var subMenuUpdate = value1.toString();
		 		var subMenuCodeUpdate = value2.toString();
		 		var subMenuStatusUpdate =value3.toString();
		 		
		 		$.ajax({
	 		          url: 'updateSubMenu',
	 		          type: 'POST', 
	 		          data: {
	 		        	 p_sub_menu_code : subMenuCodeUpdate,
	 		        	p_sub_menu_name : subMenuUpdate,
	 		        	p_status : subMenuStatusUpdate
	 		 			}, 
	 		          success: function(response) {
	 		          	message('CUS','Changes have been saved to the database',0);
	 		          	let targetRow = table1.getRows().find(row => row.getData().submenuCode === subMenuCodeUpdate);
			             if (targetRow) {
			                 targetRow.update({ submenu: subMenuUpdate });
			                 console.log("Row with SubMenu updated.");
			             } else {
			                 console.log("Row with SubMenu  not found.");
			             }
			             
							
	 		          }, complete: function (response){
	 			        	 console.log("updated  the submenu");
	 			        	
	 		   		   },
	 		   		        error: function(error) {
	 			            console.error('Error:', error);
	 			            console.log("error while try to insert");
	 			        }
	 		      });
		 		
	 		}
	 		if(insertSubMenu.length){
	 			var menuCodeSubMenu = insertSubMenu.map(row => row.menuCode);
		 		var subMenu = insertSubMenu.map(row => row.submenu);
		 		var subMenuCode = insertSubMenu.map(row => row.submenuCode);
		 		var subMenuStatus = insertSubMenu.map(row => row.checkbox);
		 		var subMenuScreenCode = insertSubMenu.map(row => row.screen);
		 		console.log("menuCodeSubMenu"+menuCodeSubMenu+" "+subMenuCode);
		 		
		 		
		  	   $.ajax({
			         url: 'insertSubMenu',
			         type: 'POST', 
			         data: {
			        	 p_sub_menu_code : subMenuCode.toString(),
			        	 p_sub_menu_name : subMenu.toString(),
			        	 p_menu_code : menuCodeSubMenu.toString(),
			        	 p_status : subMenuStatus.toString(),
			        	 p_menu_icon : null,
			        	 p_screen_code : subMenuScreenCode.toString()
						}, 
			         success: function(response) {
							message('CUS','Changes have been saved to the database',0);
							
				         }, complete: function (response){
	 			        	
				        	 SubMenuValue(menuCodeSubMenu);
				        	 console.log("inserted  the submenu");
	 			        
		 		   		   }, error: function(error) {
					           
					            console.log("error while try to update");
					        }
				     });   
		 		
	 			console.log("SubMenu");
	 		}
	 		
	 		 
	 	 	 if(flagInsertUpdate === 'I'){
	 		          console.log('insert');
	 			 if(menuCodeInsert.length > 10){
	 			 console.log("Menuode must be within the 10 character");
	 		 }else if(screenCode.length > 10){
	 			console.log("screencode must be within the 10 character");
	 		 }else{
	 		 
	 		   $.ajax({
		         url: 'insertMainMenu',
		         type: 'POST', 
		         data: {
		        	 p_menu_code : menuCodeInsert,
		        	 p_menu_name : menuNameInsert,
		        	 p_status : statusInsert,
		        	 p_screen_code : screenCode
					}, 
		         success: function(response) {
		        	 
		        	 var value = '';
			         	
			         	$('#menuInsertUpdate').val(value);
						$('#menuCodeInsertUpdate').val(value);
						$('#menuStatusInsertUpdate').val(value);
						$('#screenCodeInsertUpdate').val(value);
						$('#menuInsertUpdate').attr('data-MenuName-type', value);
						message('CUS','Changes have been saved to the database',0);
						
			         }, complete: function (response){
 			        	 console.log("inserted  the Mainmenu");
 			        	//callMainMenu();
 			        	MainMenuValue();
	 		   		   }, error: function(error) {
				           
				            console.log("error while try to update");
				        }
			     });  
			     
	 		 }
	 		 } else if(flagInsertUpdate === 'U'){
	 			if(menuNameInsert!=compareMenuName){
	 			 
	 			$.ajax({
	 		          url: 'updateMainMenu',
	 		          type: 'POST', 
	 	/* 	          data: {
	 		        	 p_menu_code : menuCodeInsert,
	 		        	p_menu_name : menuNameInsert,
	 		        	p_status : statusInsert,
	 		        	p_icon : file
	 		 			},  */
	 		 			data: formData,
	 		 			processData: false, // ✅ Required for FormData
	 		 		   contentType: false,
	 		          success: function(response) {
	 		          	message('CUS','Changes have been saved to the database',0);
	 		          	let targetRow = table.getRows().find(row => row.getData().menu === menuCodeInsert);
			             if (targetRow) {
			                 targetRow.update({ menuname: menuNameInsert });
			                 console.log("Row with enuCode updated.");
			             } else {
			                 console.log("Row with menuCode  not found.");
			             }
			             if (response.success) {
			            	 console.log("Row with menuCode  not found.");
			             }
			         	
			         	 var value = '';
				         	
				         	$('#menuInsertUpdate').val(value);
							$('#menuCodeInsertUpdate').val(value);
							$('#menuStatusInsertUpdate').val(value);
							$('#screenCodeInsertUpdate').val(value);
							$('#menuInsertUpdate').attr('data-MenuName-type', value);
							
	 		          }, complete: function (response){
	 			        	 console.log("Upadted  the Mainmenu");
	 			        	
	 		   		   },
	 		   		        error: function(error) {
	 			            console.error('Error:', error);
	 			            console.log("error while try to insert");
	 			        }
	 		      });
	 		  }else {
	 			  console.log("no changes in the value"+menuNameInsert+" "+compareMenuName)
	 		  }
	 		 }  
	 	 });
		 
	/* 	function plushIcon(cell) {
			return `<span data-toggle="modal" data-target="#securityThreatGroup"> 
					<a href="#" class="ml-2" data-toggle="tooltip" data-placement="top" data-original-title="add">					
						<i class="fa fa-plus" text-primary></i>
					</a>
				</span>
			`; // HTML with the icon and the age
		} */
		
		let currentRow = null;

		function plushIcon(cell) {
			currentRow = cell.getRow(); // save the clicked row

			return `<span data-toggle="modal" data-target="#securityThreatGroup"> 
						<a href="#" class="ml-2" data-toggle="tooltip" data-placement="top" title="Add">					
							<i class="fa fa-plus text-primary"></i>
						</a>
					</span>`;
		}	
		
		const fileInput = document.getElementById('iconFile');
		const previewImage = document.getElementById('previewImage');
		const iconError = document.getElementById('icon-error');
		  let selectedFile = null;
		  
		fileInput.addEventListener('change', function () {
		  const file = this.files[0];
		  selectedFile = null; 
		    resetPreview();
		  if (file) {
		    console.log('Uploaded file:', file);
		    console.log('File name:', file.name);
		    console.log('File type:', file.type);
		    console.log('File size:', file.size + ' bytes');

		    const maxSize = 25 * 1024; // 25KB

		    // ✅ Step 1: File size check
		   /*  if (file.size > maxSize) {
		      alert('Invalid image: File size exceeds 25KB.');
		      resetPreview();
		      return;
		    } */

		    const reader = new FileReader();

		    reader.onload = function (e) {
		      const image = new Image();

		      image.onload = function () {
		        const width = image.width;
		        const height = image.height;

		        // ✅ Step 2: Dimension check
		     /*    if (width !== 512 || height !== 512) {
		          alert('Invalid image: Dimensions must be 512x512 pixels.');
		          resetPreview();
		          return;
		        } */

		        // ✅ All checks passed — now set preview
		        selectedFile = file;
		        previewImage.style.display = 'block';
		        previewImage.src = e.target.result;
		        iconError.textContent = file.name;
		      };

		      image.onerror = function () {
		        alert('Invalid image: Could not load image.');
		        resetPreview();
		      };

		      image.src = e.target.result; // Only load into memory, not into the preview yet
		    };

		    reader.readAsDataURL(file);
		  } else {
		    resetPreview('No file selected');
		  }
		});

		function resetPreview(message = '') {
			  fileInput.value = '';
			  previewImage.src = '';
			  previewImage.style.display = 'block'; // ✅ Hide the image
			  iconError.textContent = message;
			}

	/* 	 function uploadImage(file) {
		      const formData = new FormData();
		      formData.append("image", file);

		      $.ajax({
		    	  url: 'uploadImageMenuSetup',
		    	  type: 'POST',
		    	  data: formData,
		    	  contentType: false,
		    	  processData: false,
		    	  success: function(data) {
		    	    if (data.url) {
		    	      iconError.textContent = " Uploaded: " + data.filename;
		    	      previewImage.src = data.url;
		    	    }
		    	  },
		    	  error: function(xhr, status, error) {
		    	    console.error('Upload error:', error);
		    	    iconError.textContent = '❌ Upload error';
		    	  }
		    	});
		      
		    } */
		    
		    function uploadImage(file) {
		    	  const formData = new FormData();
		    	  formData.append("file", file); // Match backend param

		    	  $.ajax({
		    	    url: 'uploadImageMenuSetup',
		    	    type: 'POST',
		    	    data: formData,
		    	    contentType: false,
		    	    processData: false,
		    	    success: function(data) {
		    	      if (data) {
		    	        iconError.textContent = "✅ Uploaded: " + file.name;
		    	        previewImage.src = data; // Since backend returns URL string
		    	      }
		    	    },
		    	    error: function(xhr, status, error) {
		    	      console.error('Upload error:', error);
		    	      iconError.textContent = '❌ Upload error';
		    	    }
		    	  });
		    	}
		    
		 /*    document.getElementById('iconFile1').addEventListener('change', function (event) {
		    	const file = event.target.files[0];
		    	if (file) {
		    		const reader = new FileReader();
		    		reader.onload = function (e) {
		    			const preview = document.getElementById('previewImage1');
		    			preview.src = e.target.result;
		    			preview.style.display = 'block';
		    		};
		    		reader.readAsDataURL(file);
		    	}
		    }); */

		/*     document.getElementById('fetchDataBtn').addEventListener('click', function () {
		    	const previewImage = document.getElementById('previewImage1').src;

		    	if (currentRow && previewImage) {
		    		currentRow.update({
		    			uploadedIcon: previewImage // Add a new field to store the image
		    		});
		    	}

		    	// Close modal
		    	$('#securityThreatGroup').modal('hide');
		    	$('.modal-backdrop').remove();

		    	// Reset file input
		    	document.getElementById('iconFile1').value = "";
		    	document.getElementById('previewImage1').src = "";
		    }); */
		    
		    document.getElementById('fetchDataBtn').addEventListener('click', function () {
		    	const previewImage = document.getElementById('previewImage1');
		    	const file = document.getElementById('iconFile1').files[0];

		    	if (currentRow && file) {
		    		currentRow.update({
		    			uploadedIcon: file // Save the File object, not base64
		    		});
		    	}

		    	// Close modal
		    	$('#securityThreatGroup').modal('hide');
		    	$('.modal-backdrop').remove();

		    	// Reset file input
		    	document.getElementById('iconFile1').value = "";
		    	previewImage.src = "";
		    });


		    $('#testValue').on('click', function () {

		    	

		    	var insertSubMenu = table1.getData().filter(row => row.addClassRow===true);
		    	var Iconmenu = insertSubMenu.map(row => row.uploadedIcon);
		    	insertSubMenu.forEach((row, index) => {
		    		if (row.uploadedIcon instanceof File) {
		    			// Create a temporary URL for the image preview
		    			const imageUrl = URL.createObjectURL(row.uploadedIcon);

		    			// Show SweetAlert2 with the image
		    			Swal.fire({
		    				title: `Preview: ${row.name}`,
		    				html: `<img src="${imageUrl}" alt="Icon Preview" style="max-width: 100%; max-height: 300px;" />`,
		    				showConfirmButton: false, // No upload or confirm button
		    				showCloseButton: true,
		    				width: 400
		    			});
		    		}
		    	});
		    	console.log("hi it's print "+insertSubMenu.length);
		    	console.log("hi it's print "+Iconmenu);
		    	
		    });
			
		    document.getElementById('iconFile1').addEventListener('change', function (event) {
		    	const file = event.target.files[0];
		    	if (file) {
		    		const preview = document.getElementById('previewImage1');
		    		preview.src = URL.createObjectURL(file); // No conversion to base64
		    		preview.style.display = 'block';

		    		// Store file for later use
		    		preview.dataset.fileName = file.name;
		    		preview.dataset.fileObject = file; // File object itself (optional)
		    	}
		    });

		</script>
		
	 	<!-- <script src="js/script.js"></script> -->
	<!--<script>
		$(document).ready(function () {
			
		});
	</script>-->
	
	<script type="text/javascript">
        $('#js-page-content').smartPanel();
    </script>
   <!--  <script src="js/vendors.bundle.js"></script>-->
    <!--     <script src="js/app.bundle.js"></script>  -->
	<style>
		.radio-buttons label{
			opacity: 1!important;
		}
		@media screen and (max-width: 1370px) {
			#menusetup-table{
				height: 185px!important;
			}
			#icon-error{
				font-size: 11px;
			}
		}
    </style>
    <div th:replace="~{fragments/msgBox :: msgBox}"></div>
	</body>
	<!-- BEGIN Page Footer -->
        <div th:replace="~{fragments/footer :: footer}"></div>
    <!-- END Page Footer -->
</html>