<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<meta charset="utf-8">
<title class="Registrationsidebar">OrientationChecklist-CBI_ORTA</title>
<div th:replace="~{fragments/head :: head}"></div>

<body class="mod-bg-1 mod-nav-link">
	<div th:replace="~{fragments/header :: header}"></div>
	<div th:replace="~{fragments/navmenus :: navmenus}"></div>
	<!-- BEGIN Page Wrapper -->
	<div class="page-wrapper">
		<div class="page-inner">
			<!-- BEGIN Left Aside -->
			<div th:replace="~{fragments/sidebar :: sidebar}"></div>
			<!-- END Left Aside -->
			<div class="page-content-wrapper">
				<!-- BEGIN Page Header -->
				<!-- END Page Header -->
				<!-- BEGIN Page Content -->
				<!-- the #js-page-content id is needed for some plugins to initialize -->
				<main id="js-page-content" role="main" class="page-content">
					<!-- <ol class="breadcrumb page-breadcrumb">
                            <li class="breadcrumb-item"><a href="javascript:void(0);">SmartAdmin</a></li>
                            <li class="breadcrumb-item">category_1</li>
                            <li class="breadcrumb-item">category_2</li>
                            <li class="breadcrumb-item active">Page Titile</li>
                            <li class="position-absolute pos-top pos-right d-none d-sm-block"><span class="js-get-date"></span></li>
                        </ol> -->
					<div class="subheader mb-1">
						<h1 class="subheader-title">
							<div th:replace="~{fragments/toggleMenu :: toggleMenu}"></div>
							<i class='subheader-icon fal fa-'></i> <span id="screenName"
								th:text="${screenName}"></span></span>
						</h1>
						<div class="frame-wrap bg-transparent">
							<div class="btn-group">
								<div class="col-12 pr-0">
									<div class="js-get-date">[your date here]</div>
								</div>
								<div class="mr-2">
									<div class="input-append date position-relative w-100">
										<span class="add-on"></span>
									</div>
								</div>
							</div>
							<a href="javascript:void(0);" id="add"
								class="btn btn-primary btn-sm btn-icon waves-effect waves-themed" data-toggle="tooltip"
								data-placement="top" data-original-title="Add"> <i class="fal fa-plus"></i>
							</a> <a href="javascript:void(0);"
								class="btn btn-warning btn-sm btn-icon waves-effect waves-themed disabled"
								data-toggle="tooltip" data-placement="top" data-original-title="Print"> <i
									class="fal fa-print"></i>
							</a> <a href="javascript:void(0);" id="clear"
								class="btn btn-secondary btn-sm btn-icon waves-effect waves-themed"
								data-toggle="tooltip" data-placement="top" data-original-title="Clear"> <i
									class="fal fa-times"></i>
							</a> <a id="saveData" href="javascript:void(0);"
								class="btn btn-success btn-sm btn-icon waves-effect waves-themed" data-toggle="tooltip"
								data-placement="top" data-original-title="OK/Save"> <i class="fal fa-save"></i>
							</a> <a href="javascript:void(0);" id="exit"
								class="btn btn-danger btn-sm btn-icon waves-effect waves-themed" data-toggle="tooltip"
								data-placement="top" data-original-title="Cancel/Exit"> <i class="fal fa-sign-out"></i>
							</a>
						</div>

					</div>

					<div class="row">
						<div class="col-lg-12">
							<div th:replace="~{fragments/formheader :: formheader}"></div>
							<div class="row">
								<div class="col-lg-12">
									<div id="panel-1" class="panel mb-2">
										<div class="panel-hdr">
											<h2>
												INTAKE/ORIENTATION CHECKLIST
											</h2>
										</div>
										<div class="panel-container show">
											<div class="panel-content">
												<div id="js-checkbox-toggles">
													<!--<input type="hidden" class="screenCode" value="38">-->

													<input type="hidden" id="screenCode" value="CBI_ORTA">

													<input class="rawField" type="hidden" data-fld="ORNT_ID"
														data-lbl="Match ID" data-typ="hide">
													<input class="rawField" type="hidden" data-fld="ORNT_SEQ"
														data-lbl="Seqno" data-typ="hide">

													<input type="hidden" class="primary_val">
													<input type="hidden" name="curr_user" id="curr_user"
														th:value="${userId}">
													<input type="hidden" name="curr_name" id="curr_name"
														th:value="${username}">
													<input type="hidden" id="vals_INSTITUTION">
													<input type="hidden" id="vals_TYPE">
													<div id="orientationCheckist_table" class="w-100"></div>
												</div>
											</div>
										</div>
									</div>
								</div>
								<input type="hidden" id="current_fld">
								<div class="d-flex align-items-center justify-content-between w-100 mx-3">
									<div class="pl-1 ml-2">
										<label class="form-lable mb-0 mr-1 text-nowrap">Total Record(s) </label>
										<input type="text" class="" allow-type="text" label-name="No of Offenders"
											specific="owba_no_offender" aria-label=" " name="ContactDate" id="no_of_rec"
											readonly value="0" style="width: 50px;text-align:center;">
									</div>
								</div>
							</div>
						</div>

						<span data-toggle="modal" style="display:none;" id="testOff" data-target="#ObservingOfficer"
							class="ObservingOfficer">
							<a href="#" id=""
								class="btn btn-primary btn-sm p-1 ml-1 btn js-waves-off d-flex align-items-center"
								data-class="nav-function-hidden">
								<i class="fa fa-users" aria-hidden="true"></i>
							</a>
						</span>

						<div class="modal fade" id="ObservingOfficer" tabindex="-1" role="dialog" aria-hidden="true">
							<div class="modal-dialog modal-dialog-centered modal-lg" role="document">
								<div class="modal-content">
									<div class="modal-header pt-3 pb-2">
										<h6 class="modal-title">Observing Officer</h6>
										<button type="button" id="ofcrClose" class="close" data-dismiss="modal" aria-label="Close">
											<span aria-hidden="true"><i class="fal fa-times"></i></span>
										</button>
									</div>
									<div class="modal-body py-0">
										<div class="d-flex align-items-center mb-2">
											<label for="dob" class="form-label mb-0 mr-2 text-nowrap">Find</label>
											<input type="text" class="form-control" aria-label="dob" name="Find"
												id="Find" placeholder="Search Officer..." autocomplete="off">
										</div>
										<div id="table-container">
											<div class="tableFixHead">
												<div id="officerTbl" class="w-100"></div>
												<!--<table id="officerTbl"
													class="table table-striped table-bordered table-sm">
													<thead>
														<tr>
															<th>Last Name</th>
															<th>First Name</th>
															<th style="width: 50px;">Mi</th>
															<th style="width: 100px;">Suffix</th>
														</tr>
													</thead>
													<tbody id="officerTblBody">
													</tbody>
												</table>-->
											</div>
										</div>
									</div>
									<div class="modal-footer">
										<button type="button" class="btn btn-primary btn-sm"
											id="searchUser">Find</button>
										<!--<button type="button" class="btn btn-primary btn-sm" id="fetchDataBtn" >Ok</button>-->
										<button type="button" id="cancelOfcrPopup" class="btn btn-secondary btn-sm"
											data-dismiss="modal">Cancel</button>
									</div>
								</div>
							</div>
						</div>

						<span data-toggle="modal" style="display:none;" id="testRes" data-target="#drugResultsModal"
							class="drugResultsModal">
							<a href="#" id=""
								class="btn btn-primary btn-sm p-1 ml-1 btn js-waves-off d-flex align-items-center"
								data-class="nav-function-hidden">
								<i class="fa fa-users" aria-hidden="true"></i>
							</a>
						</span>

						<div class="modal fade" id="drugResultsModal" tabindex="-1" role="dialog" aria-hidden="true">
							<div class="modal-dialog modal-dialog-centered modal-md" role="document">
								<div class="modal-content">
									<div class="modal-header pt-3 pb-2">
										<h6 class="modal-title">Results</h6>
										<button type="button" class="close" data-dismiss="modal" aria-label="Close">
											<span aria-hidden="true"><i class="fal fa-times"></i></span>
										</button>
									</div>
									<div class="modal-body py-0">
										<div class="d-flex align-items-center mb-2">
											<label for="dob" class="form-label mb-0 mr-2 text-nowrap">Find</label>
											<input type="text" class="form-control" aria-label="dob" name="Find"
												id="Find" value="%">
										</div>
										<div id="table-container">
											<div class="tableFixHead">
												<div id="resultTbl" class="w-100"></div>
												<!--<table id="" class="table table-striped table-bordered table-sm">
													<thead>
														<tr>
															<th>Result Description</th>
														</tr>
													</thead>
													<tbody id="res_desc">
														<tr>
															<td>
																<input type="text" class="form-control"
																	aria-label="fname" name="fname" id="fname"
																	value="NEGATIVE">
															</td>
														</tr>
														<tr>
															<td>
																<input type="text" class="form-control"
																	aria-label="fname" name="fname" id="fname"
																	value="OTHER">
															</td>
														</tr>
														<tr>
															<td>
																<input type="text" class="form-control"
																	aria-label="fname" name="fname" id="fname"
																	value="POSITIVE">
															</td>
														</tr>
														<tr>
															<td>
																<input type="text" class="form-control"
																	aria-label="fname" name="fname" id="fname"
																	value="">
															</td>
														</tr>
														<tr>
															<td>
																<input type="text" class="form-control"
																	aria-label="fname" name="fname" id="fname"
																	value="">
															</td>
														</tr>
													</tbody>
												</table>-->
											</div>
										</div>
									</div>
									<div class="modal-footer">
										<button type="button" class="btn btn-primary btn-sm"
											id="fetchDataBtn">Find</button>
										<button type="button" class="btn btn-primary btn-sm"
											id="fetchDataBtn">Ok</button>
										<button type="button" class="btn btn-secondary btn-sm"
											data-dismiss="modal">Cancel</button>
									</div>
								</div>
							</div>
						</div>
					</div>
				</main>
				<!-- this overlay is activated only when mobile menu is triggered -->
				<div class="page-content-overlay" data-action="toggle" data-class="mobile-nav-on"></div>
				<!-- END Page Content -->
				<!-- BEGIN Page Footer -->
				
				<!-- END Page Footer -->
				<!-- Modal Large -->
				<div class="modal fade" id="default-example-modal-lg" tabindex="-1" role="dialog" aria-hidden="true">
					<div class="modal-dialog modal-lg" role="document">
						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title">Staff Name</h5>
								<button type="button" class="close" data-dismiss="modal" aria-label="Close">
									<span aria-hidden="true"><i class="fal fa-times"></i></span>
								</button>
							</div>
							<div class="modal-body">
								<div class="form-group row">
									<label for="staffSearch"
										class="col-form-label col-12 col-lg-1 form-label">Search</label>
									<div class="col-12 col-lg-11">
										<input type="text" class="form-control" aria-label="staffSearch"
											name="staffSearch" id="staffSearch" value="">
									</div>

								</div>
								<div class="table-responsive-lg">
									<table class="table table-bordered m-0">
										<thead>
											<tr>
												<th>Last Name</th>
												<th>First Name</th>
												<th>MI</th>
												<th>Suffix</th>
											</tr>
										</thead>
										<tbody>
											<tr>
												<td>14</td>
												<td>Staff</td>
												<td></td>
												<td></td>
											</tr>
											<tr>
												<td>14</td>
												<td>Staff</td>
												<td></td>
												<td></td>
											</tr>
											<tr>
												<td>14</td>
												<td>Staff</td>
												<td></td>
												<td></td>
											</tr>
											<tr>
												<td>14</td>
												<td>Staff</td>
												<td></td>
												<td></td>
											</tr>
											<tr>
												<td>14</td>
												<td>Staff</td>
												<td></td>
												<td></td>
											</tr>

										</tbody>
									</table>
								</div>
							</div>

						</div>
					</div>
				</div>
				<!-- BEGIN Shortcuts -->
				<!-- modal shortcut -->
				<div class="modal fade modal-backdrop-transparent" id="modal-shortcut" tabindex="-1" role="dialog"
					aria-labelledby="modal-shortcut" aria-hidden="true">
					<div class="modal-dialog modal-dialog-top modal-transparent" role="document">
						<div class="modal-content">
							<div class="modal-body">
								<ul class="app-list w-auto h-auto p-0 text-left">
									<li>
										<a href="intel_introduction.html" class="app-list-item text-white border-0 m-0">
											<div class="icon-stack">
												<i class="base base-7 icon-stack-3x opacity-100 color-primary-500 "></i>
												<i class="base base-7 icon-stack-2x opacity-100 color-primary-300 "></i>
												<i class="fal fa-home icon-stack-1x opacity-100 color-white"></i>
											</div>
											<span class="app-list-name">
												Home
											</span>
										</a>
									</li>
									<li>
										<a href="page_inbox_general.html" class="app-list-item text-white border-0 m-0">
											<div class="icon-stack">
												<i class="base base-7 icon-stack-3x opacity-100 color-success-500 "></i>
												<i class="base base-7 icon-stack-2x opacity-100 color-success-300 "></i>
												<i class="ni ni-envelope icon-stack-1x text-white"></i>
											</div>
											<span class="app-list-name">
												Inbox
											</span>
										</a>
									</li>
									<li>
										<a href="intel_introduction.html" class="app-list-item text-white border-0 m-0">
											<div class="icon-stack">
												<i class="base base-7 icon-stack-2x opacity-100 color-primary-300 "></i>
												<i class="fal fa-plus icon-stack-1x opacity-100 color-white"></i>
											</div>
											<span class="app-list-name">
												Add More
											</span>
										</a>
									</li>
								</ul>
							</div>
						</div>
					</div>
				</div> <!-- END Shortcuts -->
			</div>
		</div>
	</div>
	<!-- END Page Wrapper -->
	<!-- BEGIN Quick Menu -->
	<!-- to add more items, please make sure to change the variable '$menu-items: number;' in your _page-components-shortcut.scss -->
	<nav class="shortcut-menu d-none d-sm-block"> <input type="checkbox" class="menu-open" name="menu-open"
			id="menu_open" />
		<label for="menu_open" class="menu-open-button "> <span class="app-shortcut-icon d-block"></span>
		</label> <a href="#" class="menu-item btn" data-toggle="tooltip" data-placement="left" title="Scroll Top"> <i
				class="fal fa-arrow-up"></i>
		</a> <a href="page_login-alt.html" class="menu-item btn" data-toggle="tooltip" data-placement="left"
			title="Logout"> <i class="fal fa-sign-out"></i>
		</a> <a href="#" class="menu-item btn" data-action="app-fullscreen" data-toggle="tooltip" data-placement="left"
			title="Full Screen"> <i class="fal fa-expand"></i>
		</a> <a href="#" class="menu-item btn" data-action="app-print" data-toggle="tooltip" data-placement="left"
			title="Print page"> <i class="fal fa-print"></i>
		</a> <a href="#" class="menu-item btn" data-action="app-voice" data-toggle="tooltip" data-placement="left"
			title="Voice command">
			<i class="fal fa-microphone"></i>
		</a>
	</nav>
	<!-- END Quick Menu -->
	<!-- BEGIN Messenger -->
	<div class="modal fade js-modal-messenger modal-backdrop-transparent" tabindex="-1" role="dialog"
		aria-hidden="true">
		<div class="modal-dialog modal-dialog-right">
			<div class="modal-content h-100">
				<div class="dropdown-header bg-trans-gradient d-flex align-items-center w-100">
					<div class="d-flex flex-row align-items-center mt-1 mb-1 color-white">
						<span class="mr-2">
							<span class="rounded-circle profile-image d-block"
								style="background-image:url('img/demo/avatars/avatar-d.png'); background-size: cover;"></span>
						</span>
						<div class="info-card-text">
							<a href="javascript:void(0);" class="fs-lg text-truncate text-truncate-lg text-white"
								data-toggle="dropdown" aria-expanded="false">
								Tracey Chang
								<i class="fal fa-angle-down d-inline-block ml-1 text-white fs-md"></i>
							</a>
							<div class="dropdown-menu">
								<a class="dropdown-item" href="#">Send Email</a>
								<a class="dropdown-item" href="#">Create Appointment</a>
								<a class="dropdown-item" href="#">Block User</a>
							</div>
							<span class="text-truncate text-truncate-md opacity-80">IT Director</span>
						</div>
					</div>
					<button type="button" class="close text-white position-absolute pos-top pos-right p-2 m-1 mr-2"
						data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true"><i class="fal fa-times"></i></span>
					</button>
				</div>
				<div class="modal-body p-0 h-100 d-flex">
					<!-- BEGIN msgr-list -->
					<div
						class="msgr-list d-flex flex-column bg-faded border-faded border-top-0 border-right-0 border-bottom-0 position-absolute pos-top pos-bottom">
						<div>
							<div
								class="height-4 width-3 h3 m-0 d-flex justify-content-center flex-column color-primary-500 pl-3 mt-2">
								<i class="fal fa-search"></i>
							</div>
							<input type="text" class="form-control bg-white" id="msgr_listfilter_input"
								name="msgr_listfilter_input" placeholder="Filter contacts" aria-label="FilterSearch"
								value="" data-listfilter="#js-msgr-listfilter">
						</div>
						<div class="flex-1 h-100 custom-scroll">
							<div class="w-100">
								<ul id="js-msgr-listfilter" class="list-unstyled m-0">
									<li>
										<a href="#" class="d-table w-100 px-2 py-2 text-dark hover-white"
											data-filter-tags="tracey chang online">
											<div class="d-table-cell align-middle status status-success status-sm ">
												<span class="profile-image-md rounded-circle d-block"
													style="background-image:url('img/demo/avatars/avatar-d.png'); background-size: cover;"></span>
											</div>
											<div class="d-table-cell w-100 align-middle pl-2 pr-2">
												<div class="text-truncate text-truncate-md">
													Tracey Chang
													<small class="d-block font-italic text-success fs-xs">
														Online
													</small>
												</div>
											</div>
										</a>
									</li>
									<li>
										<a href="#" class="d-table w-100 px-2 py-2 text-dark hover-white"
											data-filter-tags="oliver kopyuv online">
											<div class="d-table-cell align-middle status status-success status-sm ">
												<span class="profile-image-md rounded-circle d-block"
													style="background-image:url('img/demo/avatars/avatar-b.png'); background-size: cover;"></span>
											</div>
											<div class="d-table-cell w-100 align-middle pl-2 pr-2">
												<div class="text-truncate text-truncate-md">
													Oliver Kopyuv
													<small class="d-block font-italic text-success fs-xs">
														Online
													</small>
												</div>
											</div>
										</a>
									</li>
									<li>
										<a href="#" class="d-table w-100 px-2 py-2 text-dark hover-white"
											data-filter-tags="dr john cook phd away">
											<div class="d-table-cell align-middle status status-warning status-sm ">
												<span class="profile-image-md rounded-circle d-block"
													style="background-image:url('img/demo/avatars/avatar-e.png'); background-size: cover;"></span>
											</div>
											<div class="d-table-cell w-100 align-middle pl-2 pr-2">
												<div class="text-truncate text-truncate-md">
													Dr. John Cook PhD
													<small class="d-block font-italic fs-xs">
														Away
													</small>
												</div>
											</div>
										</a>
									</li>
									<li>
										<a href="#" class="d-table w-100 px-2 py-2 text-dark hover-white"
											data-filter-tags="ali amdaney online">
											<div class="d-table-cell align-middle status status-success status-sm ">
												<span class="profile-image-md rounded-circle d-block"
													style="background-image:url('img/demo/avatars/avatar-g.png'); background-size: cover;"></span>
											</div>
											<div class="d-table-cell w-100 align-middle pl-2 pr-2">
												<div class="text-truncate text-truncate-md">
													Ali Amdaney
													<small class="d-block font-italic fs-xs text-success">
														Online
													</small>
												</div>
											</div>
										</a>
									</li>
									<li>
										<a href="#" class="d-table w-100 px-2 py-2 text-dark hover-white"
											data-filter-tags="sarah mcbrook online">
											<div class="d-table-cell align-middle status status-success status-sm">
												<span class="profile-image-md rounded-circle d-block"
													style="background-image:url('img/demo/avatars/avatar-h.png'); background-size: cover;"></span>
											</div>
											<div class="d-table-cell w-100 align-middle pl-2 pr-2">
												<div class="text-truncate text-truncate-md">
													Sarah McBrook
													<small class="d-block font-italic fs-xs text-success">
														Online
													</small>
												</div>
											</div>
										</a>
									</li>
									<li>
										<a href="#" class="d-table w-100 px-2 py-2 text-dark hover-white"
											data-filter-tags="ali amdaney offline">
											<div class="d-table-cell align-middle status status-sm">
												<span class="profile-image-md rounded-circle d-block"
													style="background-image:url('img/demo/avatars/avatar-a.png'); background-size: cover;"></span>
											</div>
											<div class="d-table-cell w-100 align-middle pl-2 pr-2">
												<div class="text-truncate text-truncate-md">
													oliver.kopyuv@gotbootstrap.com
													<small class="d-block font-italic fs-xs">
														Offline
													</small>
												</div>
											</div>
										</a>
									</li>
									<li>
										<a href="#" class="d-table w-100 px-2 py-2 text-dark hover-white"
											data-filter-tags="ali amdaney busy">
											<div class="d-table-cell align-middle status status-danger status-sm">
												<span class="profile-image-md rounded-circle d-block"
													style="background-image:url('img/demo/avatars/avatar-j.png'); background-size: cover;"></span>
											</div>
											<div class="d-table-cell w-100 align-middle pl-2 pr-2">
												<div class="text-truncate text-truncate-md">
													oliver.kopyuv@gotbootstrap.com
													<small class="d-block font-italic fs-xs text-danger">
														Busy
													</small>
												</div>
											</div>
										</a>
									</li>
									<li>
										<a href="#" class="d-table w-100 px-2 py-2 text-dark hover-white"
											data-filter-tags="ali amdaney offline">
											<div class="d-table-cell align-middle status status-sm">
												<span class="profile-image-md rounded-circle d-block"
													style="background-image:url('img/demo/avatars/avatar-c.png'); background-size: cover;"></span>
											</div>
											<div class="d-table-cell w-100 align-middle pl-2 pr-2">
												<div class="text-truncate text-truncate-md">
													oliver.kopyuv@gotbootstrap.com
													<small class="d-block font-italic fs-xs">
														Offline
													</small>
												</div>
											</div>
										</a>
									</li>
									<li>
										<a href="#" class="d-table w-100 px-2 py-2 text-dark hover-white"
											data-filter-tags="ali amdaney inactive">
											<div class="d-table-cell align-middle">
												<span class="profile-image-md rounded-circle d-block"
													style="background-image:url('img/demo/avatars/avatar-m.png'); background-size: cover;"></span>
											</div>
											<div class="d-table-cell w-100 align-middle pl-2 pr-2">
												<div class="text-truncate text-truncate-md">
													+714651347790
													<small class="d-block font-italic fs-xs opacity-50">
														Missed Call
													</small>
												</div>
											</div>
										</a>
									</li>
								</ul>
								<div class="filter-message js-filter-message"></div>
							</div>
						</div>
						<div>
							<a class="fs-xl d-flex align-items-center p-3">
								<i class="fal fa-cogs"></i>
							</a>
						</div>
					</div>
					<!-- END msgr-list -->
					<!-- BEGIN msgr -->
					<div class="msgr d-flex h-100 flex-column bg-white">
						<!-- BEGIN custom-scroll -->
						<div class="custom-scroll flex-1 h-100">
							<div id="chat_container" class="w-100 p-4">
								<!-- start .chat-segment -->
								<div class="chat-segment">
									<div class="time-stamp text-center mb-2 fw-400">
										Jun 19
									</div>
								</div>
								<!--  end .chat-segment -->
								<!-- start .chat-segment -->
								<div class="chat-segment chat-segment-sent">
									<div class="chat-message">
										<p>
											Hey Ching, did you get my files?
										</p>
									</div>
									<div class="text-right fw-300 text-muted mt-1 fs-xs">
										3:00 pm
									</div>
								</div>
								<!--  end .chat-segment -->
								<!-- start .chat-segment -->
								<div class="chat-segment chat-segment-get">
									<div class="chat-message">
										<p>
											Hi
										</p>
										<p>
											Sorry going through a busy time in office. Yes I analyzed the solution.
										</p>
										<p>
											It will require some resource, which I could not manage.
										</p>
									</div>
									<div class="fw-300 text-muted mt-1 fs-xs">
										3:24 pm
									</div>
								</div>
								<!--  end .chat-segment -->
								<!-- start .chat-segment -->
								<div class="chat-segment chat-segment-sent chat-start">
									<div class="chat-message">
										<p>
											Okay
										</p>
									</div>
								</div>
								<!--  end .chat-segment -->
								<!-- start .chat-segment -->
								<div class="chat-segment chat-segment-sent chat-end">
									<div class="chat-message">
										<p>
											Sending you some dough today, you can allocate the resources to this
											project.
										</p>
									</div>
									<div class="text-right fw-300 text-muted mt-1 fs-xs">
										3:26 pm
									</div>
								</div>
								<!--  end .chat-segment -->
								<!-- start .chat-segment -->
								<div class="chat-segment chat-segment-get chat-start">
									<div class="chat-message">
										<p>
											Perfect. Thanks a lot!
										</p>
									</div>
								</div>
								<!--  end .chat-segment -->
								<!-- start .chat-segment -->
								<div class="chat-segment chat-segment-get">
									<div class="chat-message">
										<p>
											I will have them ready by tonight.
										</p>
									</div>
								</div>
								<!--  end .chat-segment -->
								<!-- start .chat-segment -->
								<div class="chat-segment chat-segment-get chat-end">
									<div class="chat-message">
										<p>
											Cheers
										</p>
									</div>
								</div>
								<!--  end .chat-segment -->
								<!-- start .chat-segment for timestamp -->
								<div class="chat-segment">
									<div class="time-stamp text-center mb-2 fw-400">
										Jun 20
									</div>
								</div>
								<!--  end .chat-segment for timestamp -->
							</div>
						</div>
						<!-- END custom-scroll  -->
						<!-- BEGIN msgr__chatinput -->
						<div class="d-flex flex-column">
							<div
								class="border-faded border-right-0 border-bottom-0 border-left-0 flex-1 mr-3 ml-3 position-relative shadow-top">
								<div class="pt-3 pb-1 pr-0 pl-0 rounded-0" tabindex="-1">
									<div id="msgr_input" contenteditable="true"
										data-placeholder="Type your message here..."
										class="height-10 form-content-editable"></div>
								</div>
							</div>
							<div class="height-8 px-3 d-flex flex-row align-items-center flex-wrap flex-shrink-0">
								<a href="javascript:void(0);" class="btn btn-icon fs-xl width-1 mr-1"
									data-toggle="tooltip" data-original-title="More options" data-placement="top">
									<i class="fal fa-ellipsis-v-alt color-fusion-300"></i>
								</a>
								<a href="javascript:void(0);" class="btn btn-icon fs-xl mr-1" data-toggle="tooltip"
									data-original-title="Attach files" data-placement="top">
									<i class="fal fa-paperclip color-fusion-300"></i>
								</a>
								<a href="javascript:void(0);" class="btn btn-icon fs-xl mr-1" data-toggle="tooltip"
									data-original-title="Insert photo" data-placement="top">
									<i class="fal fa-camera color-fusion-300"></i>
								</a>
								<div class="ml-auto">
									<a href="javascript:void(0);" class="btn btn-info">Send</a>
								</div>
							</div>
						</div>
						<!-- END msgr__chatinput -->
					</div>
					<!-- END msgr -->
				</div>
			</div>
		</div>
	</div>
	<!-- END Messenger -->
	<!-- BEGIN Page Settings -->
	<div class="modal fade js-modal-settings modal-backdrop-transparent" tabindex="-1" role="dialog" aria-hidden="true">
		<div class="modal-dialog modal-dialog-right modal-md">
			<div class="modal-content">
				<div class="dropdown-header bg-trans-gradient d-flex justify-content-center align-items-center w-100">
					<h4 class="m-0 text-center color-white">
						Layout Settings
						<small class="mb-0 opacity-80">User Interface Settings</small>
					</h4>
					<button type="button" class="close text-white position-absolute pos-top pos-right p-2 m-1 mr-2"
						data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true"><i class="fal fa-times"></i></span>
					</button>
				</div>
				<div class="modal-body p-0">
					<div class="settings-panel">
						<div class="mt-4 d-table w-100 px-5">
							<div class="d-table-cell align-middle">
								<h5 class="p-0">
									App Layout
								</h5>
							</div>
						</div>
						<div class="list" id="fh">
							<a href="#" onclick="return false;" class="btn btn-switch" data-action="toggle"
								data-class="header-function-fixed"></a>
							<span class="onoffswitch-title">Fixed Header</span>
							<span class="onoffswitch-title-desc">header is in a fixed at all times</span>
						</div>
						<div class="list" id="nff">
							<a href="#" onclick="return false;" class="btn btn-switch" data-action="toggle"
								data-class="nav-function-fixed"></a>
							<span class="onoffswitch-title">Fixed Navigation</span>
							<span class="onoffswitch-title-desc">left panel is fixed</span>
						</div>
						<div class="list" id="nfm">
							<a href="#" onclick="return false;" class="btn btn-switch" data-action="toggle"
								data-class="nav-function-minify"></a>
							<span class="onoffswitch-title">Minify Navigation</span>
							<span class="onoffswitch-title-desc">Skew nav to maximize space</span>
						</div>
						<div class="list" id="nfh">
							<a href="#" onclick="return false;" class="btn btn-switch" data-action="toggle"
								data-class="nav-function-hidden"></a>
							<span class="onoffswitch-title">Hide Navigation</span>
							<span class="onoffswitch-title-desc">roll mouse on edge to reveal</span>
						</div>
						<div class="list" id="nft">
							<a href="#" onclick="return false;" class="btn btn-switch" data-action="toggle"
								data-class="nav-function-top"></a>
							<span class="onoffswitch-title">Top Navigation</span>
							<span class="onoffswitch-title-desc">Relocate left pane to top</span>
						</div>
						<div class="list" id="mmb">
							<a href="#" onclick="return false;" class="btn btn-switch" data-action="toggle"
								data-class="mod-main-boxed"></a>
							<span class="onoffswitch-title">Boxed Layout</span>
							<span class="onoffswitch-title-desc">Encapsulates to a container</span>
						</div>
						<div class="expanded">
							<ul class="">
								<li>
									<div class="bg-fusion-50" data-action="toggle" data-class="mod-bg-1"></div>
								</li>
								<li>
									<div class="bg-warning-200" data-action="toggle" data-class="mod-bg-2"></div>
								</li>
								<li>
									<div class="bg-primary-200" data-action="toggle" data-class="mod-bg-3"></div>
								</li>
								<li>
									<div class="bg-success-300" data-action="toggle" data-class="mod-bg-4"></div>
								</li>
							</ul>
							<div class="list" id="mbgf">
								<a href="#" onclick="return false;" class="btn btn-switch" data-action="toggle"
									data-class="mod-fixed-bg"></a>
								<span class="onoffswitch-title">Fixed Background</span>
							</div>
						</div>
						<!-- <div class="mt-4 d-table w-100 px-5">
                            <div class="d-table-cell align-middle">
                                <h5 class="p-0">
                                    Mobile Menu
                                </h5>
                            </div>
                        </div>
                        <div class="list" id="nmp">
                            <a href="#" onclick="return false;" class="btn btn-switch" data-action="toggle"
                                data-class="nav-mobile-push"></a>
                            <span class="onoffswitch-title">Push Content</span>
                            <span class="onoffswitch-title-desc">Content pushed on menu reveal</span>
                        </div>
                        <div class="list" id="nmno">
                            <a href="#" onclick="return false;" class="btn btn-switch" data-action="toggle"
                                data-class="nav-mobile-no-overlay"></a>
                            <span class="onoffswitch-title">No Overlay</span>
                            <span class="onoffswitch-title-desc">Removes mesh on menu reveal</span>
                        </div>
                        <div class="list" id="sldo">
                            <a href="#" onclick="return false;" class="btn btn-switch" data-action="toggle"
                                data-class="nav-mobile-slide-out"></a>
                            <span class="onoffswitch-title">Off-Canvas <sup>(beta)</sup></span>
                            <span class="onoffswitch-title-desc">Content overlaps menu</span>
                        </div> -->
						<div class="mt-4 d-table w-100 px-5">
							<div class="d-table-cell align-middle">
								<h5 class="p-0">
									Accessibility
								</h5>
							</div>
						</div>
						<div class="list" id="mbf">
							<a href="#" onclick="return false;" class="btn btn-switch" data-action="toggle"
								data-class="mod-bigger-font"></a>
							<span class="onoffswitch-title">Bigger Content Font</span>
							<span class="onoffswitch-title-desc">content fonts are bigger for readability</span>
						</div>
						<div class="list" id="mhc">
							<a href="#" onclick="return false;" class="btn btn-switch" data-action="toggle"
								data-class="mod-high-contrast"></a>
							<span class="onoffswitch-title">High Contrast Text (WCAG 2 AA)</span>
							<span class="onoffswitch-title-desc">4.5:1 text contrast ratio</span>
						</div>
						<div class="list" id="mcb">
							<a href="#" onclick="return false;" class="btn btn-switch" data-action="toggle"
								data-class="mod-color-blind"></a>
							<span class="onoffswitch-title">Daltonism <sup>(beta)</sup> </span>
							<span class="onoffswitch-title-desc">color vision deficiency</span>
						</div>
						<div class="list" id="mpc">
							<a href="#" onclick="return false;" class="btn btn-switch" data-action="toggle"
								data-class="mod-pace-custom"></a>
							<span class="onoffswitch-title">Preloader Inside</span>
							<span class="onoffswitch-title-desc">preloader will be inside content</span>
						</div>
						<div class="mt-4 d-table w-100 px-5">
							<div class="d-table-cell align-middle">
								<h5 class="p-0">
									Global Modifications
								</h5>
							</div>
						</div>
						<div class="list" id="mcbg">
							<a href="#" onclick="return false;" class="btn btn-switch" data-action="toggle"
								data-class="mod-clean-page-bg"></a>
							<span class="onoffswitch-title">Clean Page Background</span>
							<span class="onoffswitch-title-desc">adds more whitespace</span>
						</div>
						<div class="list" id="mhni">
							<a href="#" onclick="return false;" class="btn btn-switch" data-action="toggle"
								data-class="mod-hide-nav-icons"></a>
							<span class="onoffswitch-title">Hide Navigation Icons</span>
							<span class="onoffswitch-title-desc">invisible navigation icons</span>
						</div>
						<div class="list" id="dan">
							<a href="#" onclick="return false;" class="btn btn-switch" data-action="toggle"
								data-class="mod-disable-animation"></a>
							<span class="onoffswitch-title">Disable CSS Animation</span>
							<span class="onoffswitch-title-desc">Disables CSS based animations</span>
						</div>
						<div class="list" id="mhic">
							<a href="#" onclick="return false;" class="btn btn-switch" data-action="toggle"
								data-class="mod-hide-info-card"></a>
							<span class="onoffswitch-title">Hide Info Card</span>
							<span class="onoffswitch-title-desc">Hides info card from left panel</span>
						</div>
						<div class="list" id="mlph">
							<a href="#" onclick="return false;" class="btn btn-switch" data-action="toggle"
								data-class="mod-lean-subheader"></a>
							<span class="onoffswitch-title">Lean Subheader</span>
							<span class="onoffswitch-title-desc">distinguished page header</span>
						</div>
						<div class="list" id="mnl">
							<a href="#" onclick="return false;" class="btn btn-switch" data-action="toggle"
								data-class="mod-nav-link"></a>
							<span class="onoffswitch-title">Hierarchical Navigation</span>
							<span class="onoffswitch-title-desc">Clear breakdown of nav links</span>
						</div>
						<div class="list mt-1">
							<span class="onoffswitch-title">Global Font Size <small>(RESETS ON REFRESH)</small> </span>
							<div class="btn-group btn-group-sm btn-group-toggle my-2" data-toggle="buttons">
								<label for="smRadio" class="btn btn-default btn-sm" data-action="toggle-swap"
									data-class="root-text-sm" data-target="html">
									<input type="radio" aria-label="smRadio" name="smRadio" id="smRadio" value=""> SM
								</label>
								<label for="mdRadio" class="btn btn-default btn-sm" data-action="toggle-swap"
									data-class="root-text" data-target="html">
									<input type="radio" aria-label="mdRadio" name="mdRadio" id="mdRadio" value=""
										checked=""> MD
								</label>
								<label for="lgRadio" class="btn btn-default btn-sm" data-action="toggle-swap"
									data-class="root-text-lg" data-target="html">
									<input type="radio" aria-label="lgRadio" name="lgRadio" id="lgRadio" value=""> LG
								</label>
								<label for="xlRadio" class="btn btn-default btn-sm" data-action="toggle-swap"
									data-class="root-text-xl" data-target="html">
									<input type="radio" aria-label="xlRadio" name="xlRadio" id="xlRadio" value=""> XL
								</label>
							</div>
							<span class="onoffswitch-title-desc d-block mb-g">Change <strong>root</strong> font size to
								effect rem values</span>
						</div>
						<div class="mt-2 d-table w-100 pl-5 pr-3">
							<div class="d-table-cell align-middle">
								<h5 class="p-0">
									Theme colors <small>(overlays base css)</small>
								</h5>
								<!-- <div class="fs-xs text-muted p-2 alert alert-warning mt-3 mb-0">
                                    <i class="fal fa-exclamation-triangle text-warning mr-2"></i>Due to network latency
                                    and CPU utilization, you may experience a brief flickering effect on page load which
                                    may show the intial applied theme for a split second. Setting the prefered
                                    style/theme in the header will prevent this from happening.
                                </div> -->
							</div>
						</div>
						<div class="expanded theme-colors pl-5 pr-3">
							<ul class="m-0">
								<li><a href="#" id="myapp-0" data-action="theme-update" data-themesave data-theme=""
										data-toggle="tooltip" data-placement="top" title="Wisteria (base css)"
										data-original-title="Wisteria (base css)"></a></li>
								<li><a href="#" id="myapp-1" data-action="theme-update" data-themesave
										data-theme="css/themes/cust-theme-1.css" data-toggle="tooltip"
										data-placement="top" title="Tapestry" data-original-title="Tapestry"></a></li>
								<li><a href="#" id="myapp-2" data-action="theme-update" data-themesave
										data-theme="css/themes/cust-theme-2.css" data-toggle="tooltip"
										data-placement="top" title="Atlantis" data-original-title="Atlantis"></a></li>
								<li><a href="#" id="myapp-3" data-action="theme-update" data-themesave
										data-theme="css/themes/cust-theme-3.css" data-toggle="tooltip"
										data-placement="top" title="Indigo" data-original-title="Indigo"></a></li>
								<li><a href="#" id="myapp-4" data-action="theme-update" data-themesave
										data-theme="css/themes/cust-theme-4.css" data-toggle="tooltip"
										data-placement="top" title="Dodger Blue" data-original-title="Dodger Blue"></a>
								</li>
								<li><a href="#" id="myapp-5" data-action="theme-update" data-themesave
										data-theme="css/themes/cust-theme-5.css" data-toggle="tooltip"
										data-placement="top" title="Tradewind" data-original-title="Tradewind"></a></li>
								<li><a href="#" id="myapp-6" data-action="theme-update" data-themesave
										data-theme="css/themes/cust-theme-6.css" data-toggle="tooltip"
										data-placement="top" title="Cranberry" data-original-title="Cranberry"></a></li>
								<li><a href="#" id="myapp-7" data-action="theme-update" data-themesave
										data-theme="css/themes/cust-theme-7.css" data-toggle="tooltip"
										data-placement="top" title="Oslo Gray" data-original-title="Oslo Gray"></a></li>
								<li><a href="#" id="myapp-8" data-action="theme-update" data-themesave
										data-theme="css/themes/cust-theme-8.css" data-toggle="tooltip"
										data-placement="top" title="Chetwode Blue"
										data-original-title="Chetwode Blue"></a></li>
								<li><a href="#" id="myapp-9" data-action="theme-update" data-themesave
										data-theme="css/themes/cust-theme-9.css" data-toggle="tooltip"
										data-placement="top" title="Apricot" data-original-title="Apricot"></a></li>
								<li><a href="#" id="myapp-10" data-action="theme-update" data-themesave
										data-theme="css/themes/cust-theme-10.css" data-toggle="tooltip"
										data-placement="top" title="Blue Smoke" data-original-title="Blue Smoke"></a>
								</li>
								<li><a href="#" id="myapp-11" data-action="theme-update" data-themesave
										data-theme="css/themes/cust-theme-11.css" data-toggle="tooltip"
										data-placement="top" title="Green Smoke" data-original-title="Green Smoke"></a>
								</li>
								<li><a href="#" id="myapp-12" data-action="theme-update" data-themesave
										data-theme="css/themes/cust-theme-12.css" data-toggle="tooltip"
										data-placement="top" title="Wild Blue Yonder"
										data-original-title="Wild Blue Yonder"></a></li>
								<li><a href="#" id="myapp-13" data-action="theme-update" data-themesave
										data-theme="css/themes/cust-theme-13.css" data-toggle="tooltip"
										data-placement="top" title="Emerald" data-original-title="Emerald"></a></li>
							</ul>
						</div>
						<hr class="mb-0 mt-4">
						<div class="pl-5 pr-3 py-3 bg-faded">
							<div class="row no-gutters">
								<div class="col-6 pr-1">
									<a href="#" class="btn btn-outline-danger fw-500 btn-block"
										data-action="app-reset">Reset Settings</a>
								</div>
								<div class="col-6 pl-1">
									<a href="#" class="btn btn-danger fw-500 btn-block"
										data-action="factory-reset">Factory Reset</a>
								</div>
							</div>
						</div>
					</div>
					<span id="saving"></span>
				</div>
			</div>
		</div>
	</div>
	<!-- END Page Settings -->

	<style>
		label {
			font-weight: 500;
		}

		#officerTbl {
			/*min-height: 300px;*/
			/* Set minimum height */
			max-height: 300px;
			/* Set maximum height */
			overflow-y: auto;
			/* Enable vertical scrolling */
		}

		.mydisabled {
			background-color: #ddd;
			/* Light gray background for disabled rows */
			/*color: #a0a0a0;*/
			/* Gray text color */
			pointer-events: none;
			/* Disable pointer events */
		}

		.nav-function-top .page-content-wrapper {
			margin-top: 4rem;
		}
	</style>

	<div th:replace="~{fragments/script :: script}"></div>
	<script>

		// Define Test Data
		var sampleData = [
			{
				id: "0",
				seq: "0",
			},
			{
				id: "1",
				seq: "0",
			},
			{
				id: "2",
				seq: "0",
			},
			{
				id: "3",
				seq: "0",
			},
			{
				id: "4",
				seq: "0",
			},
			{
				id: "5",
				seq: "0",
			},
			{
				id: "6",
				seq: "0",
			},
			{
				id: "7",
				seq: "0",
			},
			{
				id: "8",
				seq: "0",
			},
			{
				id: "9",
				seq: "0",
			},
			{
				id: "10",
				seq: "0",
			},
			{
				id: "11",
				seq: "0",
			},
			{
				id: "12",
				seq: "0",
			},
			{
				id: "13",
				seq: "0",
			},
			{
				id: "14",
				seq: "0",
			},
			{
				id: "15",
				seq: "0",
			},
			{
				id: "16",
				seq: "0",
			},
			{
				id: "17",
				seq: "0",
			},
			{
				id: "18",
				seq: "0",
			},
		];

		function timePickerEditor(cell) {
			const cellValue = cell.getValue();
			const input = document.createElement("input");
			input.type = "time";
			input.value = cellValue || "";
			input.style.width = "100%";

			input.addEventListener("change", function () {
				cell.setValue(this.value);
			});

			return input;
		}

		var jsondata = {"test1": "ListItem1", "test2": "ListItem2", "test3": "ListItem2"};

		function getData() {
			//var jsondata = {"john":"ListItem1","test":"ListItem2","mokey":"kevin"};
			//alert("from getData : " + jsonata);
			return jsondata;
		}

		/*setTimeout(function () {
			jsondata = {"test4": "ListItem4", "test5": "ListItem5"};
			alert('executed');
			alert(getData().toString());
		}, 12000);*/

		var institution_Array = [];
		var type_Array = [];
		/*setTimeout(function () {
			institution_Array = JSON.parse($('#vals_institution').val());
			type_Array = JSON.parse($('#vals_type').val());
		}, 2000);*/

		//Create Date Editor
		/*var dateEditor = function (cell, onRendered, success, cancel) {
			//cell - the cell component for the editable cell
			//onRendered - function to call when the editor has been rendered
			//success - function to call to pass thesuccessfully updated value to Tabulator
			//cancel - function to call to abort the edit and return to a normal cell

			//create and style input
			var cellValue = luxon.DateTime.fromFormat(cell.getValue(), "MM/dd/yyyy").toFormat("yyyy-MM-dd"),
				input = document.createElement("input");

			input.setAttribute("type", "date");

			input.style.padding = "4px";
			input.style.width = "100%";
			input.style.boxSizing = "border-box";

			input.value = cellValue;

			onRendered(function () {
				input.focus();
				input.style.height = "100%";
			});

			function onChange() {
				if (input.value != cellValue) {
					success(luxon.DateTime.fromFormat(input.value, "yyyy-MM-dd").toFormat("MM/dd/yyyy"));
				} else {
					cancel();
				}
			}

			//submit new value on blur or change
			input.addEventListener("blur", onChange);

			//submit new value on enter
			input.addEventListener("keydown", function (e) {
				if (e.keyCode == 13) {
					onChange();
				}

				if (e.keyCode == 27) {
					cancel();
				}
			});

			return input;
		};*/

		//var typeTest_Array = JSON.parse($('#vals_typeTest').val());

		var user_tbl = new Tabulator("#officerTbl", {
			layout: "fitColumns",
			printAsHtml: true,
			printStyled: true,
			height: '150px',
			columns: [
				{title: "userid", field: "USER_ID", visible: false},
				{title: "Last Name", field: "USER_LAST_NAME"},
				{title: "First Name", field: "USER_FIRST_NAME"},
				{title: "Mi", field: "USER_MID_NAME", width: 50},
				{title: "Suffix", field: "USER_SUFFIX_NAME", width: 100},
			]
		});

		/*var result_tbl = new Tabulator("#resultTbl", {
			layout: "fitColumns",
			printAsHtml: true,
			printStyled: true,
			columns: [
				{title: "resultVal", field: "FINDING_RESULT_CODE", visible: false},
				{title: "Result Description", field: "FINDING_RESULT_DESC"},
			]
		});*/

		function getCurrentDate() {
			const today = new Date(); // Get the current date
			const month = String(today.getMonth() + 1).padStart(2, '0'); // Get the month (0-11) and add 1, then pad with zero
			const day = String(today.getDate()).padStart(2, '0'); // Get the day (1-31) and pad with zero
			const year = today.getFullYear(); // Get the full year (yyyy)

			return `${month}/${day}/${year}`; // Return the date in mm/dd/yyyy format
		}

		function getCurrentTime() {
			const now = new Date(); // Get the current date and time
			const hours = String(now.getHours()).padStart(2, '0'); // Get the hours (0-23) and pad with zero
			const minutes = String(now.getMinutes()).padStart(2, '0'); // Get the minutes (0-59) and pad with zero

			return `${hours}:${minutes}`; // Return the time in HH:mm format
		}
		
		function createTabulator() {
            return new Tabulator("#tabulator-container", {
                data: tableData,
                selectableRange: true,
                columns: [
                    {title: "ID", field: "id", width: 70},
                    {title: "Name", field: "name"},
                    {
                        title: "Date", 
                        field: "date", 
                        formatter: "date", // Use built-in date formatter
                        editor: false // Disable editing
                    }
                ]
            });
        }

		//Define Table
		var table = new Tabulator("#orientationCheckist_table", {
			layout: "fitColumns",
			data: sampleData,
			height: '380px',
			selectableRange: true,
			printAsHtml: true,
			printStyled: true,
			columns: [
				{
					field: "id",
					visible: false,
				},
				{
					field: "upd",
					visible: false,
				},
				{
					//title: '<span style="display: none;">Id</span>',
					editor: "input",
					visible: false,
					field: "ORNT_ID",
				},
				{
					//title: '<span class="permissible permissible_code" tag="head" style="display: none;" allow-type="hide" specific="smt_seq">Seqno</span>',
					editor: "input",
					visible: false,
					field: "ORNT_SEQ",
				},
				{
					//title: '<span class="permissible" tag="head" allow-type="date" specific="ornt_date">Orientation Date</span>',
					titleFormatter: (column) => setTitleDesc(column, 'ORIENTATIONDATE', 'Orientation Date'),
					field: "ORIENTATIONDATE",
					editor: dateEditor,
					sorter: "string",
					sorterParams: {alignEmptyValues: "bottom"},
					width: 140,
					cellEdited: function (cell) {
						setUpd(cell);
						//setUpdate(cell.getRow().getData().id);
					}
				},
				{
					//title: '<span class="permissible" tag="head" allow-type="dropdown" specific="ornt_inst">Institution</span>',
					titleFormatter: (column) => setTitleDesc(column, 'INSTITUTION', 'Institution'),
					field: "INSTITUTION",
					width: 380,
					editor: "list",
					editorParams: {allowEmpty: true, listOnEmpty: true, valuesLookup: true, autocomplete: true, values: {}},
					cellEdited: function (cell) {
						setUpd(cell);
						//setUpdate(cell.getRow().getData().id);
					},
					sorter: "string",
					sorterParams: {alignEmptyValues: "bottom"},
				},
				{
					//title: '<span class="permissible" tag="head" allow-type="dropdown" specific="ornt_type">Type</span>',
					titleFormatter: (column) => setTitleDesc(column, 'TYPE', 'Type'),
					field: "TYPE",
					width: 250,
					editor: "list",
					editorParams: {allowEmpty: true, listOnEmpty: true, valuesLookup: true, autocomplete: true, values: {}},
					cellEdited: function (cell) {
						//var ide = cell.getRow().getData().id;
						//focusCell(ide, "namePicker");
						setUpd(cell);
						setUpdate(cell.getRow().getData().id);
					},
					sorter: "string",
					sorterParams: {alignEmptyValues: "bottom"},
				},
				{
					//title: '<span class="permissible" tag="head" allow-type="text" specific="ornt_userid">User ID</span>',
					titleFormatter: (column) => setTitleDesc(column, 'OBSERVINGOFFICER', 'User ID'),
					field: "OBSERVINGOFFICER",
					sorter: "string",
					sorterParams: {alignEmptyValues: "bottom"},
					width: 120,
					visible: false
				},
				{
					//title: '<span class="permissible" tag="head" allow-type="text" specific="user_full_name">Provided by (L,F,M,S)</span>',
					titleFormatter: (column) => setTitleDesc(column, 'userFullName', 'Provided by (L,F,M,S)'),
					field: "userFullName",
					sorter: "string",
					sorterParams: {alignEmptyValues: "bottom"},
				},
				{
					title: '<span specific="namepicker" allow-type="not" class="permissible" tag="head"></span>',
					field: "namePicker",
					formatter: userIcon,
					width: 10,
					sortable: false,
					headerSort: false,
				},
				/*{
					title: 'sample',
					field: 'sample',
					editor: 'input',
				}*/
			]
		});

		tabulatorRegistry["orientationCheckist_table"] = {
			varName: "table",
			instance: table
		};

		function setUpd(cell) {
			// Get the row data
			const rowData = cell.getRow().getData();

			// Set the 'upd' field to 'Y'
			rowData.upd = "Y";

			// Update the row data
			cell.getRow().update(rowData);
			updatable = true;
		}

		// Function to add a class to all rows after initialization
		function addClassToRows(className) {
			var rows = table.getRows();

			rows.forEach(function (row) {
				row.getElement().classList.add(className);
			});
		}

		setTimeout(function () {
			addClassToRows("mydisabled");
		}, 100);

		function setUpdate(id) {
			//alert(id);
			//$('#drugdna_table').find('.tabulator-row').eq(id).addClass('allow_update');
			//$('#drugdna_table').find('.tabulator-row').eq(id).attr('allow_id', id);
			var row = table.getRow(id); // Get the row by ID
			if (row) {
				var rowElement = row.getElement(); // Get the row element
				rowElement.classList.add('allow_update'); // Add the class to the row element
				rowElement.setAttribute('allow_id', id);
			} else {
				console.error("Row not found for rowId:", rowId);
			}
		}

		function refreshTable() {
			alert('ok1');
			table.setData(tabledatadrugdna);
		}

		$('#add').on('click', function () {

			if ($('#sbiNumberInput').val().trim() == '') {
				message('W', 0, 0);
				return;
			}

			var key_val = $('.primary_val').val();

			if (key_val == '') {
				message('W', 0, 0);
				return;
			}

			table.clearSort();

			var rowCount = table.getData().length;
			//return;

			const newRowData = {
				id: rowCount,
				upd: "Y",
				seq: "0",
				ORNT_ID: "",
				ORNT_SEQ: "",
				ORIENTATIONDATE: "",
				INSTITUTION: "",
				TYPE: "",
				OBSERVINGOFFICER: "",
				userFullName: "",
				isNewRow: true,
			};

			table.addData(newRowData, true); // true for adding at the top*/
			//load_class();
			//focusCell(rowCount, "orientationDate");
			setUpdate(rowCount);
			setCellValue(rowCount, "ORIENTATIONDATE", getCurrentDate());
			var loc = $('#Location1').val().split('-')[1].trim();
			var dynamic_Array = JSON.parse($('#vals_INSTITUTION').val());
			const selectedOption = dynamic_Array.find(option => option.value === loc);
			setCellValue(rowCount, "INSTITUTION", selectedOption.label);
			focusCell(rowCount, "TYPE");
		});

		function load_class() {

			for (var i = 0; i < $('.permissible').length; i++) {

				var cls_name = $('.permissible').eq(i).attr('specific');
				var allow_type = $('.permissible').eq(i).attr('allow-type');

				var tab_id = $('.permissible').eq(i).parents('.tabulator').prop('id');

				$('#' + tab_id).find('.tabulator-cell').addClass('mytd');

				if ($('.permissible').eq(i).attr('tag') == 'head') {

					var tab_fld = $('#' + tab_id + ' .tabulator-cell:eq(' + (i) + ')').attr('tabulator-field');

					table.getRows().forEach(row => {
						const cell = row.getCell(tab_fld); // Get the cell in the specified column
						if (cell) {
							const cellElement = cell.getElement(); // Get the cell's DOM element

							cellElement.classList.add(cls_name);
							cellElement.classList.add('form-fld');
							cellElement.setAttribute('data-fld', cls_name); // Add a custom attribute
							if (allow_type == 'dropdown') {
								cellElement.classList.add('dropdown_vals');
							}
							if ($('#mandatory_fld').val().includes('[' + tab_fld + ']')) {
								cellElement.classList.add('mandatory');
							}
						}
					});
				}
			}
		}

		//RowSetter
		function setCellValue(rowNumber, columnField, valueToSet) {
			// Get the row by its index (rowNumber - 1 because rowNumber is 1-based)
			var row = table.getRow(rowNumber);

			// Check if the row exists
			if (row) {
				// Update the specific field in the row
				row.update({[columnField]: valueToSet});
			} else {
				console.error("Row not found");
			}
		}

		//RowGetter
		function getCellValue(rowId, field) {
			// Get the row by its ID
			var row = table.getRow(rowId);

			// Check if the row exists
			if (row) {
				// Get the cell value
				var cell = row.getCell(field);
				return cell ? cell.getValue() : ''; // Return the cell value or null if the cell doesn't exist
			} else {
				console.error("Row not found");
				return null; // Return null if the row doesn't exist
			}
		}

		function focusCell(rowId, field) {
			var row = table.getRow(rowId); // Get the row by ID
			if (row) {
				var cell = row.getCell(field); // Get the cell from the row
				if (cell) {
					cell.edit(); // Open the editor for the cell
					// Wait for the editor to be created before focusing
					/*setTimeout(function () {
						var input = cell.getElement().querySelector("input");
						if (input) {
							input.focus(); // Focus the input element
						}
					}, 0);*/
				} else {
					console.error("Cell not found for field:", field);
				}
			} else {
				console.error("Row not found for rowId:", rowId);
			}
		}

		/*table.getRows().forEach(function (row) {
			row.getElement().classList.add('mydisabled');
		});*/

		//setTimeout(function () {
		//$('.tabulator-row').addClass('mydisabled');	
		//$('#drugdna_table').find('.tabulator-row').addClass('mydisabled');
		//}, 2000);


		table.on("rowClick", function (e, row) {
			//alert("Row " + row.getData().user_name + " Clicked!!!!");
			var rowid = row.getData().id;
			$('#current_fld').val(rowid);
			var med = getCellValue(rowid, 'med');
			var cmt = getCellValue(rowid, 'cmt');
			$('#addMedications').val(med);
			$('#addComments').val(cmt);
		});

		function populateDropdown(data, dropdownId) {
			var dropdown = $(dropdownId);
			dropdown.empty();

			dropdown.append($('<option></option>').attr('value', '').text(''));

			data.forEach(function (item) {
				var Code = item[0];
				var Desc = item[1];
				var option = $('<option></option>').attr('value', Code).text(Desc);
				dropdown.append(option);
			});
		}

		var cont_tp_cd = $('#selectTypeOfContact').find(':selected').val();

		function userIcon(cell) {
			return `<i class="fa fa-users namepicker" title="Observing officer" style="position: absolute; right: 5px; top: 5px; margin-right: 5px;"></i>`; // HTML with the icon and the age
		}
		function downloadIcon(cell) {
			return `<i class="fa fa-download" style="position: absolute; right: 5px; top: 5px; margin-right: 5px;"></i>`; // HTML with the icon and the age
		}

		$(document).ready(function () {
			$(function () {
				$('.select2').select2();

				$(".select2-placeholder-multiple").select2(
					{
						placeholder: "Select State"
					});
				$(".js-hide-search").select2(
					{
						minimumResultsForSearch: 1 / 0
					});
				$(".js-max-length").select2(
					{
						maximumSelectionLength: 2,
						placeholder: "Select maximum 2 items"
					});
				$(".select2-placeholder").select2(
					{
						placeholder: "Select a state",
						allowClear: true
					});



				$(".js-select2-icons").select2(
					{
						minimumResultsForSearch: 1 / 0,
						templateResult: icon,
						templateSelection: icon,
						escapeMarkup: function (elm) {
							return elm
						}
					});

				function icon(elm) {
					elm.element;
					return elm.id ? "<i class='" + $(elm.element).data("icon") + " mr-2'></i>" + elm.text : elm.text
				}

				$(".js-data-example-ajax").select2(
					{
						ajax:
						{
							url: "https://api.github.com/search/repositories",
							dataType: 'json',
							delay: 250,
							data: function (params) {
								return {
									q: params.term, // search term
									page: params.page
								};
							},
							processResults: function (data, params) {
								// parse the results into the format expected by Select2
								// since we are using custom formatting functions we do not need to
								// alter the remote JSON data, except to indicate that infinite
								// scrolling can be used
								params.page = params.page || 1;

								return {
									results: data.items,
									pagination:
									{
										more: (params.page * 30) < data.total_count
									}
								};
							},
							cache: true
						},
						placeholder: 'Search for a repository',
						escapeMarkup: function (markup) {
							return markup;
						}, // let our custom formatter work
						minimumInputLength: 1,
						templateResult: formatRepo,
						templateSelection: formatRepoSelection
					});

				function formatRepo(repo) {
					if (repo.loading) {
						return repo.text;
					}

					var markup = "<div class='select2-result-repository clearfix d-flex'>" +
						"<div class='select2-result-repository__avatar mr-2'><img src='" + repo.owner.avatar_url + "' class='width-2 height-2 mt-1 rounded' /></div>" +
						"<div class='select2-result-repository__meta'>" +
						"<div class='select2-result-repository__title fs-lg fw-500'>" + repo.full_name + "</div>";

					if (repo.description) {
						markup += "<div class='select2-result-repository__description fs-xs opacity-80 mb-1'>" + repo.description + "</div>";
					}

					markup += "<div class='select2-result-repository__statistics d-flex fs-sm'>" +
						"<div class='select2-result-repository__forks mr-2'><i class='fal fa-lightbulb'></i> " + repo.forks_count + " Forks</div>" +
						"<div class='select2-result-repository__stargazers mr-2'><i class='fal fa-star'></i> " + repo.stargazers_count + " Stars</div>" +
						"<div class='select2-result-repository__watchers mr-2'><i class='fal fa-eye'></i> " + repo.watchers_count + " Watchers</div>" +
						"</div>" +
						"</div></div>";

					return markup;
				}

				function formatRepoSelection(repo) {
					return repo.full_name || repo.text;
				}

			});

			$('#Find').on('keyup', function (e) {
				if (e.keyCode == 13) {
					$('#searchUser').trigger('click');
				}
			});

			$("#searchUser").on("click", function () {
				var value = $('#Find').val().toLowerCase();
				setOfficerTab(value);
				/*$("#officerTbl tbody tr").filter(function () {
					$(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
				});*/
			});

			var obsOffr = 0;

			/*$(document.body).on('click', '.resultpicker', function () {
				//alert($('#current_fld').val());
				result_tbl.clearData();
				var curr_row = $('#current_fld').val();
				var typeTest = getCellValue(curr_row, 'typeTest');

				var dynamic_Array = JSON.parse($('#vals_typeTest').val());
				const selectedVal = dynamic_Array.find(myval => myval.label === typeTest);
				var val = selectedVal.value;

				result_tbl.setData('getTestResult2?TestType=' + val);
				$('#testRes').trigger('click');
			});*/

			$(document.body).on('click', '.namepicker', function () {
				//alert($('#current_fld').val());
				user_tbl.clearData();
				$('#testOff').trigger('click');
			});

			$(".ObservingOfficer").on("click", function () {
				obsOffr = $(this).index('.ObservingOfficer');
				$('#Find').val("");
				$('#officerTblBody').empty();
			});

			$(document.body).on('click', '.ofcr_tab_row', function () {
				var idx = $(this).index('.ofcr_tab_row');
				var nam = $('.ofcr_lname').eq(idx).text() + ' ';
				nam += $('.ofcr_fname').eq(idx).text() + ' ';
				nam += $('.ofcr_mname').eq(idx).text() + ' ';
				nam += $('.ofcr_sname').eq(idx).text();
				$('.drugdna_offr').eq(obsOffr).val(nam.trim());
				$('.close').trigger('click');
				$('.modal-backdrop').hide();
			});

			$(document.body).on('keyup', '.drugdna_offr', function () {
				if ($(this).val().trim() != '') {
					setOfficer($(this).val().toLowerCase().trim());
				} else {
					$('#user-list').empty();
				}
			});

			$(document.body).on('focus', '.drugdna_offr', function () {
				$('#user-list').empty();
			});

			function setOfficer(srchkey) {
				console.log('srchkey: ' + srchkey);
				$.ajax({
					url: contextPath + 'getOfficer',
					method: 'POST',
					dataType: "json",
					data: {srchkey: srchkey},
					success: function (response) {
						var content = '';
						for (var i = 0; i < response.length; i++) {
							content += '<option>' + nullHandler(response[i]['USER_LAST_NAME']) + ' ' + nullHandler(response[i]['USER_FIRST_NAME']) + ' ';
							content += nullHandler(response[i]['USER_MID_NAME']) + ' ' + nullHandler(response[i]['USER_SUFFIX_NAME']) + '</option>';
						}
						console.log(content);
						$('#user-list').html(content);
					},
					error: function (error) {
						//console.error("Error getting table names:", error);
					}
				});
			}

			user_tbl.on("rowClick", function (e, row) {
				//alert("Row " + row.getData().user_name + " Clicked!!!!");
				var curr_fld = $('#current_fld').val();
				var id = row.getData().USER_ID;
				var nam = nullHandler(row.getData().USER_LAST_NAME) + ' ' + nullHandler(row.getData().USER_FIRST_NAME) + ' ';
				nam += nullHandler(row.getData().USER_MID_NAME) + ' ' + nullHandler(row.getData().USER_SUFFIX_NAME);
				setCellValue(curr_fld, 'OBSERVINGOFFICER', id);
				setCellValue(curr_fld, 'userFullName', commaName(nam));
				setCellValue(curr_fld, 'upd', 'Y');
				setUpdate(curr_fld);
				//$('#cancelOfcrPopup').trigger('click');
				//$('.modal-backdrop').hide();
				document.getElementById("ofcrClose").click();
			});

			/*result_tbl.on("rowClick", function (e, row) {
				//alert("Row " + row.getData().user_name + " Clicked!!!!");
				var curr_fld = $('#current_fld').val();
				var code = row.getData().FINDING_RESULT_CODE;
				var desc = row.getData().FINDING_RESULT_DESC;
				setCellValue(curr_fld, 'Results', desc);
				setCellValue(curr_fld, 'res', code);
				setUpdate(curr_fld);
				$('.close').trigger('click');
			});*/

			function setOfficerTab(srchkey) {

				user_tbl.setData('getOfficer2?srchkey=' + srchkey);

				/*$.ajax({
					url: contextPath + 'getOfficer',
					method: 'POST',
					dataType: "json",
					data: {srchkey: srchkey},
					success: function (response) {
						var content = '';
						var tab_content = '';
						for (var i = 0; i < response.length; i++) {
							tab_content += '<tr class="ofcr_tab_row" style="cursor:pointer;">';
							tab_content += '<td class="ofcr_lname">' + nullHandler(response[i]['USER_LAST_NAME']) + '</td>';
							tab_content += '<td class="ofcr_fname">' + nullHandler(response[i]['USER_FIRST_NAME']) + '</td>';
							tab_content += '<td class="ofcr_mname">' + nullHandler(response[i]['USER_MID_NAME']) + '</td>';
							tab_content += '<td class="ofcr_sname">' + nullHandler(response[i]['USER_SUFFIX_NAME']) + '</td>';
							tab_content += '</tr>';
						}
						console.log('tab_content is ' + tab_content);
						$('#officerTblBody').html(tab_content);
					},
					error: function (error) {
						//console.error("Error getting table names:", error);
					}
				});*/
			}

			function nullHandler(x) {
				if (x == null) {
					x = '';
				}
				return x;
			}

			var resPopIndex = "";

			$('.drugPopBtn').on('click', function () {

				var idx = $(this).index('.drugPopBtn');
				var testType = $('.drugdna_tsttyp').eq(idx).val();
				resPopIndex = idx;

				if (testType != '') {

					$.ajax({
						type: "POST",
						url: contextPath + "getTestResult",
						dataType: "json",
						data: {TestType: testType},
						success: function (response) {
							//var inst_cnt = response[0]['INST_COUNT'];
							var content = "";
							for (var i = 0; i < response.length; i++) {
								content += "<tr><td style='cursor:pointer;' class='result_val' data-val='" + response[i]['FINDING_RESULT_CODE'] + "' data-desc='" + response[i]['FINDING_RESULT_DESC'] + "'>" + response[i]['FINDING_RESULT_DESC'] + "</td></td>";
								//content += "<tr><td style='cursor:pointer;' class='result_val' data-val='" + response[i]['FINDING_RESULT_DESC'] + "'>" + response[i]['FINDING_RESULT_DESC'] + "</td></td>";
							}
							$('#res_desc').html(content);
							$('.drugPop').eq(idx).trigger('click');
						},
						error: function () {
							alert("json not found");
						}
					});

				}
			});

			$(document.body).on('change', '.drugdna_tsttyp', function () {
				var idx = $(this).index('.drugdna_tsttyp');
				$('.drugdna_res').eq(idx).val('');
				$('.result_desc').eq(idx).val('');
			});

			$(document.body).on('click', '.result_val', function () {
				$('.drugdna_tsttyp').eq(resPopIndex).trigger('change');
				var res_val = $(this).attr('data-val');
				var res_desc = $(this).attr('data-desc');
				$('.drugdna_res').eq(resPopIndex).val(res_val);
				$('.result_desc').eq(resPopIndex).val(res_desc);
				resPopIndex = "";
				$('.close').trigger('click');
			});
			
						var histCont = `<span class="d-flex" data-toggle="modal" data-target=""   id="histBtn"  >									
									<a href="#"class="btn btn-primary btn-sm p-1 ml-1 btn js-waves-off d-flex align-items-center" data-toggle="tooltip" data-placement="top" data-original-title="Prior Incarceration" data-action="toggle">
										<i class="fa fa-history" style="font-size: 10px;"></i>
									</a>
								</span>`;
								
								//alert(histCont);

			//$('#historyButton').after(histCont);
			//$('#historyButton').remove();

			function convertToMMDDYY(dateString) {
				if (dateString) {
					const date = new Date(dateString);
					const formattedMonth = String(date.getUTCMonth() + 1).padStart(2, '0');
					const formattedDay = String(date.getUTCDate()).padStart(2, '0');
					const formattedYear = date.getUTCFullYear();
					return `${formattedMonth}/${formattedDay}/${formattedYear}`;
				}
				return '';
			}

			var tabledatapreviousstay = [];
			/*window.commithistory = new Tabulator("#previousstay-table", {
				layout: "fitColumns",
				data: tabledatapreviousstay,
				height: '150px',
				columns: [
					{title: "Checkbox", field: "Checkbox", visible: false},
					{title: "Stay#", field: "stay"},
					{title: "Facility", field: "facility"},
					{title: "Offender Type", field: "offenderType", width: 200},
					{title: "Admitted", field: "admitted"},
					{title: "Time", field: "time"},
					{title: "Released", field: "released"},
					{title: "Time", field: "time1"}
				],
			});*/
			
			function fetchCommitNoDtls(commitNo) {			
				 function getLastPathSegment(url) {
						if (url.endsWith('/')) {
							url = url.slice(0, -1);
						}
						return url.substring(url.lastIndexOf('/') + 1);
					}
					var pageUrl = window.location.href;
					var lastPath = getLastPathSegment(pageUrl);
					console.log("lastPath", lastPath);
					console.log("lastPath", commitNo);
					var sbiNumberInput = $('#sbiNumberInput').val().trim();
					var userId = localStorage.getItem('userId');
					
					
					$.ajax({
						method: "POST",
						url: contextPath + 'checkSbiNoAndLocationHistory',
						data: {
							commitNo: commitNo,
							parameter: sbiNumberInput,
							page: lastPath
						},
						success: function (response) {
							$('#StayHistoryModal').modal('hide');

							if (response.locationDetails && response.inmateList && response.offenderCondition) {
								const { locationDetails, inmateList, offenderCondition } = response;

								$("#FirstName").val(inmateList[0][0]);
								$("#dateofbirth").val(convertToMMDDYY(inmateList[0][5]));
								$("#Sex").val(inmateList[0][6]);
								$("#offenderCondition").val(offenderCondition);

								$("#Location1").val(locationDetails['ovc_location1']);
								$("#Security1").val(locationDetails['ovc_security_lvl1']);
								$("#AssignedOfficer1").val(locationDetails['ovc_assigned_officer1']);
								$("#Location2").val(locationDetails['ovc_location2']);
								$("#Security2").val(locationDetails['ovc_security_lvl2']);
								$("#AssignedOfficer2").val(locationDetails['ovc_assigned_officer2']);
								localStorage.setItem('location1', locationDetails['ovc_location1']);

								if ($('#screenCode').length) {
									const screenCode = $('#screenCode').val();
									if (['CBI_URNE', 'CBI_MARK', 'CBI_ORTA', 'CBI_ALIS', 'CBI_DEMO'].includes(screenCode)) {
										$('#current_commit').val(commitNo);
										$('.primary_val').val(commitNo);
										$('#call_fetch').trigger('click');
									}
								}

								// Load photo
								$.ajax({
									method: "GET",
									url: contextPath + "inmateimage/" + sbiNumberInput + "?userId=" + userId,
									success: function (response) {
										const imageContainer = document.querySelector(".imageContainerPhoto");
										if (!response) {
											imageContainer.src = 'data:image/jpeg;base64,' + imagendatanull;
										} else {
											imageContainer.src = response;
										}
									}
								});

								// Handle multi-location checkbox
								if (locationDetails['ovc_location1'] && locationDetails['ovc_location2']) {
									$("#headmultiStatus").prop('checked', true);
								}
							}

							if (response.output) {
								$('#offenderrace').val(response.output.RACE_DESC);
								if (response.output.STG_STATUS_FLAG === 'Y') {
									$('#defaultInline3').prop('checked', true);
									$('.STG_btn').removeAttr('disabled').removeAttr('read-only').css('pointer-events', 'auto');
								}
							}
						},
						error: function () {
							$('#errorNAME').text('ID is not valid').show();
							message('CUW', 'Please enter valid ID#', 0);
							 $('#ok_btn').data('clear-input', true); // Flag to clear input
							$('#sbiNumberInput').focus();
						}
					});
				}

			commithistory.on("rowClick", function (e, row) {
				commithistory.getRows().forEach(r => r.getElement().classList.remove('selected-row'));
				row.getElement().classList.add('clicked-row');
				var data = row.getData();
				var commitNo = data.Checkbox;
				localStorage.setItem('selectedCommitNo', commitNo);

				console.log("Selected Commit No data", commitNo);
				//alert(commitNo);
				fetchCommitNoDtls(commitNo);
			});

			$('#histBtn').on('click', function () {
				if ($('#sbiNumberInput').val().trim() === '') {
					message('W01', 0);
					$('#ok_btn').data('clear-input', true); // Flag to clear input
					return;
				}
				var sbiNumberInput = $('#sbiNumberInput').val().trim();
				$.ajax({
					url: contextPath + 'fetchStayHistory',
					type: 'GET',
					data: {
						sbiNo: sbiNumberInput,
						docIdFlag: "N"
					},
					success: function (response) {

						if (response && response.length > 0) {
							var inmateName = response[0].inmate_name || '';
							$('#offendernameDisplay').val(inmateName);
						}
						$('#sbiNumberDisplay').val(sbiNumberInput);
						var selectedCommitNo = localStorage.getItem('selectedCommitNo');

						const tabledatapreviousstay = response.map(item => ({
							Checkbox: item.commit_no,
							stay: item.stay || '',
							facility: item.inst_name || '',
							offenderType: item.sent_type_desc || '',
							admitted: convertToMMDDYY(item.inst_admiss_date),
							time: item.inst_admiss_time || '',
							released: convertToMMDDYY(item.inst_release_date),
							time1: item.inst_release_time || '',
						}));

						commithistory.clearData();
						commithistory.setData(tabledatapreviousstay);
						$('#StayHistoryModal').modal('show');
					},
					error: function (xhr, status, error) {
						console.error("Error fetching stay history:", error);
						message('CUW', 'Please enter valid ID#', 0);
						$('#ok_btn').data('clear-input', true); // Flag to clear input
					}
				});
			});

		});
		
		//$('.page-footer').eq(1).css('visibility','hidden');
	</script>
	<div th:replace="~{fragments/reusable :: reusable}"></div>
	<div th:replace="~{fragments/msgBox :: msgBox}"></div>

	<!--<script src="js/../script.js"></script>
	<script>
		$(document).ready(function () {
			
		});
	</script>-->
</body>

</html>